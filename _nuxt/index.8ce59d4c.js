import{b as O,u as Q}from"./index.5dbd068b.js";import{B as ee,r as te,G as g}from"./util.c8753e63.js";import{B as Ye,G as Ge,r as Ue}from"./util.c8753e63.js";import{f as N,a5 as ae,a2 as q,p as u,k as w,E as le,ac as X,o as k,c as D,L as F,Z as se,I as W,a4 as H,u as f,R as $,$ as oe,a7 as re,aj as ne,D as Z,S as Y,X as ie,w as G,e as U,a3 as ue,M as ce,H as me,aL as ve,K as fe,P as de,Y as pe,aa as he}from"./entry.40f94ce2.js";import{b as j,d as be}from"./runtime.a8d5aa72.js";import{_ as K}from"./plugin-vue_export-helper.b0b5f2d9.js";import{t as ye}from"./error.6c36bb34.js";import{c as E}from"./types.0ffe2429.js";import{b as I}from"./style.a7bf22e4.js";import{w as ge}from"./install.db378abc.js";const J=Symbol("scrollbarContextKey"),we=j({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Se="Thumb",_e=N({__name:"thumb",props:we,setup(d){const c=d,i=ae(J),l=q("scrollbar");i||ye(Se,"can not inject scrollbar context");const n=u(),m=u(),o=u({}),v=u(!1);let a=!1,h=!1,b=ne?document.onselectstart:null;const t=w(()=>ee[c.vertical?"vertical":"horizontal"]),S=w(()=>te({size:c.size,move:c.move,bar:t.value})),_=w(()=>n.value[t.value.offset]**2/i.wrapElement[t.value.scrollSize]/c.ratio/m.value[t.value.offset]),P=s=>{var e;if(s.stopPropagation(),s.ctrlKey||[1,2].includes(s.button))return;(e=window.getSelection())==null||e.removeAllRanges(),M(s);const r=s.currentTarget;!r||(o.value[t.value.axis]=r[t.value.offset]-(s[t.value.client]-r.getBoundingClientRect()[t.value.direction]))},L=s=>{if(!m.value||!n.value||!i.wrapElement)return;const e=Math.abs(s.target.getBoundingClientRect()[t.value.direction]-s[t.value.client]),r=m.value[t.value.offset]/2,p=(e-r)*100*_.value/n.value[t.value.offset];i.wrapElement[t.value.scroll]=p*i.wrapElement[t.value.scrollSize]/100},M=s=>{s.stopImmediatePropagation(),a=!0,document.addEventListener("mousemove",R),document.addEventListener("mouseup",y),b=document.onselectstart,document.onselectstart=()=>!1},R=s=>{if(!n.value||!m.value||a===!1)return;const e=o.value[t.value.axis];if(!e)return;const r=(n.value.getBoundingClientRect()[t.value.direction]-s[t.value.client])*-1,p=m.value[t.value.offset]-e,z=(r-p)*100*_.value/n.value[t.value.offset];i.wrapElement[t.value.scroll]=z*i.wrapElement[t.value.scrollSize]/100},y=()=>{a=!1,o.value[t.value.axis]=0,document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",y),T(),h&&(v.value=!1)},x=()=>{h=!1,v.value=!!c.size},A=()=>{h=!0,v.value=a};le(()=>{T(),document.removeEventListener("mouseup",y)});const T=()=>{document.onselectstart!==b&&(document.onselectstart=b)};return O(X(i,"scrollbarElement"),"mousemove",x),O(X(i,"scrollbarElement"),"mouseleave",A),(s,e)=>(k(),D(re,{name:f(l).b("fade"),persisted:""},{default:F(()=>[se(W("div",{ref_key:"instance",ref:n,class:H([f(l).e("bar"),f(l).is(f(t).key)]),onMousedown:L},[W("div",{ref_key:"thumb",ref:m,class:H(f(l).e("thumb")),style:$(f(S)),onMousedown:P},null,38)],34),[[oe,s.always||v.value]])]),_:1},8,["name"]))}});var V=K(_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const ze=j({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ee=N({__name:"bar",props:ze,setup(d,{expose:c}){const i=d,l=u(0),n=u(0);return c({handleScroll:o=>{if(o){const v=o.offsetHeight-g,a=o.offsetWidth-g;n.value=o.scrollTop*100/v*i.ratioY,l.value=o.scrollLeft*100/a*i.ratioX}}}),(o,v)=>(k(),Z(ie,null,[Y(V,{move:l.value,ratio:o.ratioX,size:o.width,always:o.always},null,8,["move","ratio","size","always"]),Y(V,{move:n.value,ratio:o.ratioY,size:o.height,vertical:"",always:o.always},null,8,["move","ratio","size","always"])],64))}});var ke=K(Ee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const He=j({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:be([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Pe={scroll:({scrollTop:d,scrollLeft:c})=>[d,c].every(E)},Re="ElScrollbar",Te=N({name:Re}),Be=N({...Te,props:He,emits:Pe,setup(d,{expose:c,emit:i}){const l=d,n=q("scrollbar");let m,o;const v=u(),a=u(),h=u(),b=u("0"),t=u("0"),S=u(),_=u(1),P=u(1),L=w(()=>{const e={};return l.height&&(e.height=I(l.height)),l.maxHeight&&(e.maxHeight=I(l.maxHeight)),[l.wrapStyle,e]}),M=w(()=>[l.wrapClass,n.e("wrap"),{[n.em("wrap","hidden-default")]:!l.native}]),R=w(()=>[n.e("view"),l.viewClass]),y=()=>{var e;a.value&&((e=S.value)==null||e.handleScroll(a.value),i("scroll",{scrollTop:a.value.scrollTop,scrollLeft:a.value.scrollLeft}))};function x(e,r){he(e)?a.value.scrollTo(e):E(e)&&E(r)&&a.value.scrollTo(e,r)}const A=e=>{!E(e)||(a.value.scrollTop=e)},T=e=>{!E(e)||(a.value.scrollLeft=e)},s=()=>{if(!a.value)return;const e=a.value.offsetHeight-g,r=a.value.offsetWidth-g,p=e**2/a.value.scrollHeight,z=r**2/a.value.scrollWidth,B=Math.max(p,l.minSize),C=Math.max(z,l.minSize);_.value=p/(e-p)/(B/(e-B)),P.value=z/(r-z)/(C/(r-C)),t.value=B+g<e?`${B}px`:"",b.value=C+g<r?`${C}px`:""};return G(()=>l.noresize,e=>{e?(m==null||m(),o==null||o()):({stop:m}=Q(h,s),o=O("resize",s))},{immediate:!0}),G(()=>[l.maxHeight,l.height],()=>{l.native||U(()=>{var e;s(),a.value&&((e=S.value)==null||e.handleScroll(a.value))})}),ue(J,ce({scrollbarElement:v,wrapElement:a})),me(()=>{l.native||U(()=>{s()})}),ve(()=>s()),c({wrapRef:a,update:s,scrollTo:x,setScrollTop:A,setScrollLeft:T,handleScroll:y}),(e,r)=>(k(),Z("div",{ref_key:"scrollbarRef",ref:v,class:H(f(n).b())},[W("div",{ref_key:"wrapRef",ref:a,class:H(f(M)),style:$(f(L)),onScroll:y},[(k(),D(de(e.tag),{ref_key:"resizeRef",ref:h,class:H(f(R)),style:$(e.viewStyle)},{default:F(()=>[fe(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?pe("v-if",!0):(k(),D(ke,{key:0,ref_key:"barRef",ref:S,height:t.value,width:b.value,always:e.always,"ratio-x":P.value,"ratio-y":_.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Ce=K(Be,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const je=ge(Ce);export{Ye as BAR_MAP,je as ElScrollbar,Ge as GAP,je as default,Ue as renderThumbStyle,J as scrollbarContextKey,Pe as scrollbarEmits,He as scrollbarProps,we as thumbProps};
