import{b as w,d as S}from"./runtime.ca6a5e5a.js";import{ap as j,f as D,aS as q,I as F,e as k,aT as G,N as h,i as J,v as K,r as M,a1 as Q,U as O,b as v,aJ as R,h as T,Z as X,S as ee,R as oe,an as I}from"./entry.b33cb278.js";import{P as x}from"./vnode.acbb2db8.js";import{i as te}from"./icon.13fbe947.js";import{U as N}from"./event.e54e7e4a.js";import{d as ne}from"./types.bb628c62.js";import{u as le}from"./index.8e2f8365.js";import{u as se}from"./use-global-config.6d104472.js";import{h as P,g as ae,b as ue,r as ce,a as ie}from"./style.6fe07f58.js";import{t as re}from"./error.6c36bb34.js";import{a as de}from"./scroll.edc775c4.js";const fe=(e,o={})=>{j(e)||re("[useLockscreen]","You need to pass a ref param to this function");const u=o.ns||D("popup"),t=q(()=>u.bm("parent","hidden"));if(!F||P(document.body,t.value))return;let c=0,a=!1,n="0";const r=()=>{setTimeout(()=>{ce(document==null?void 0:document.body,t.value),a&&document&&(document.body.style.width=n)},200)};k(e,s=>{if(!s){r();return}a=!P(document.body,t.value),a&&(n=document.body.style.width),c=de(u.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,d=ae(document.body,"overflowY");c>0&&(f||d==="scroll")&&a&&(document.body.style.width=`calc(100% - ${c}px)`),ue(document.body,t.value)}),G(()=>r())},me=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,u=!1;return{onClick:n=>{o&&u&&e(n),o=u=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{u=n.target===n.currentTarget}}},ye=w({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:S([String,Array,Object])},zIndex:{type:S([String,Number])}}),ve={click:e=>e instanceof MouseEvent},pe="overlay";var Ce=J({name:"ElOverlay",props:ye,emits:ve,setup(e,{slots:o,emit:u}){const t=D(pe),c=s=>{u("click",s)},{onClick:a,onMousedown:n,onMouseup:r}=me(e.customMaskEvent?void 0:c);return()=>e.mask?K("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:n,onMouseup:r},[M(o,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):Q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(o,"default")])}});const Ie=Ce,be=w({center:Boolean,alignCenter:Boolean,closeIcon:{type:te},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Pe={close:()=>!0},De=w({...be,appendToBody:Boolean,beforeClose:{type:S(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Fe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[N]:e=>ne(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ne=(e,o)=>{const t=oe().emit,{nextZIndex:c}=le();let a="";const n=O(),r=O(),s=v(!1),f=v(!1),d=v(!1),p=v(e.zIndex||c());let m,y;const z=se("namespace",R),A=T(()=>{const l={},i=`--${z.value}-dialog`;return e.fullscreen||(e.top&&(l[`${i}-margin-top`]=e.top),e.width&&(l[`${i}-width`]=ie(e.width))),l}),L=T(()=>e.alignCenter?{display:"flex"}:{});function V(){t("opened")}function $(){t("closed"),t(N,!1),e.destroyOnClose&&(d.value=!1)}function H(){t("close")}function B(){y==null||y(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=I(()=>E(),e.openDelay):E()}function C(){m==null||m(),y==null||y(),e.closeDelay&&e.closeDelay>0?{stop:y}=I(()=>g(),e.closeDelay):g()}function b(){function l(i){i||(f.value=!0,s.value=!1)}e.beforeClose?e.beforeClose(l):C()}function U(){e.closeOnClickModal&&b()}function E(){!F||(s.value=!0)}function g(){s.value=!1}function Y(){t("openAutoFocus")}function W(){t("closeAutoFocus")}function Z(l){var i;((i=l.detail)==null?void 0:i.focusReason)==="pointer"&&l.preventDefault()}e.lockScroll&&fe(s);function _(){e.closeOnPressEscape&&b()}return k(()=>e.modelValue,l=>{l?(f.value=!1,B(),d.value=!0,p.value=e.zIndex?p.value++:c(),X(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):s.value&&C()}),k(()=>e.fullscreen,l=>{!o.value||(l?(a=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=a)}),ee(()=>{e.modelValue&&(s.value=!0,d.value=!0,B())}),{afterEnter:V,afterLeave:$,beforeLeave:H,handleClose:b,onModalClick:U,close:C,doClose:g,onOpenAutoFocus:Y,onCloseAutoFocus:W,onCloseRequested:_,onFocusoutPrevented:Z,titleId:n,bodyId:r,closed:f,style:A,overlayDialogStyle:L,rendered:d,visible:s,zIndex:p}};export{Ie as E,Fe as a,be as b,Pe as c,De as d,me as e,Ne as u};
