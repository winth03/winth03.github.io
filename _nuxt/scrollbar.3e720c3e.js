import{m as X}from"./_baseGet.57648035.js";import{k as d,x as J,f as Q,a2 as B,p as F,M as tt,u as y,w as et,E as rt,j as P,aK as nt}from"./entry.40f94ce2.js";import{a as m,b as N,d as g}from"./runtime.a8d5aa72.js";import{m as at}from"./typescript.c44ade1c.js";import{B as ot}from"./util.c8753e63.js";import{c as st,r as lt}from"./raf.961fe51d.js";var G=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function it(t,e){return!!(t===e||G(t)&&G(e))}function ct(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!it(t[n],e[n]))return!1;return!0}function ut(t,e){e===void 0&&(e=ct);var n=null;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(n&&n.lastThis===this&&e(a,n.lastArgs))return n.lastResult;var c=t.apply(this,a);return n={lastResult:c,lastArgs:a,lastThis:this},c}return i.clear=function(){n=null},i}const wt=()=>{const e=J().proxy.$props;return d(()=>{const n=(i,a,o)=>({});return e.perfMode?X(n):ut(n)})},_t=50,zt="itemRendered",Ct="scroll",dt="forward",mt="backward",It="auto",xt="smart",Ot="start",Dt="center",Bt="end",E="horizontal",k="vertical",ft="ltr",H="rtl",vt="negative",ht="positive-ascending",gt="positive-descending",pt={[E]:"left",[k]:"top"},St=20,A=m({type:g([Number,Function]),required:!0}),M=m({type:Number}),w=m({type:Number,default:2}),bt=m({type:String,values:["ltr","rtl"],default:"ltr"}),_=m({type:Number,default:0}),T=m({type:Number,required:!0}),$=m({type:String,values:["horizontal","vertical"],default:k}),q=N({className:{type:String,default:""},containerElement:{type:g([String,Object]),default:"div"},data:{type:g(Array),default:()=>at([])},direction:bt,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:g([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Ft=N({cache:w,estimatedItemSize:M,layout:$,initScrollOffset:_,total:T,itemSize:A,...q}),z={type:Number,default:6},V={type:Number,default:0},j={type:Number,default:2},Pt=N({columnCache:w,columnWidth:A,estimatedColumnWidth:M,estimatedRowHeight:M,initScrollLeft:_,initScrollTop:_,itemKey:{type:g(Function),default:({columnIndex:t,rowIndex:e})=>`${e}:${t}`},rowCache:w,rowHeight:A,totalColumn:T,totalRow:T,hScrollbarSize:z,vScrollbarSize:z,scrollbarStartGap:V,scrollbarEndGap:j,role:String,...q}),yt=N({alwaysOn:Boolean,class:String,layout:$,total:T,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:z,startGap:V,endGap:j,visible:Boolean}),Gt=(t,e)=>t<e?dt:mt,kt=t=>t===ft||t===H||t===E,Ht=t=>t===H;let v=null;function $t(t=!1){if(v===null||t){const e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const i=document.createElement("div"),a=i.style;return a.width="100px",a.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?v=gt:(e.scrollLeft=1,e.scrollLeft===0?v=vt:v=ht),document.body.removeChild(e),v}return v}function Et({move:t,size:e,bar:n},i){const a={},o=`translate${n.axis}(${t}px)`;return a[n.size]=e,a.transform=o,a.msTransform=o,a.webkitTransform=o,i==="horizontal"?a.height="100%":a.width="100%",a}const qt=Q({name:"ElVirtualScrollBar",props:yt,emits:["scroll","start-move","stop-move"],setup(t,{emit:e}){const n=d(()=>t.startGap+t.endGap),i=B("virtual-scrollbar"),a=B("scrollbar"),o=F(),c=F();let C=null,R=null;const l=tt({isDragging:!1,traveled:0}),s=d(()=>ot[t.layout]),I=d(()=>t.clientSize-y(n)),K=d(()=>({position:"absolute",width:`${E===t.layout?I.value:t.scrollbarSize}px`,height:`${E===t.layout?t.scrollbarSize:I.value}px`,[pt[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),L=d(()=>{const r=t.ratio,u=t.clientSize;if(r>=100)return Number.POSITIVE_INFINITY;if(r>=50)return r*u/100;const f=u/3;return Math.floor(Math.min(Math.max(r*u,St),f))}),U=d(()=>{if(!Number.isFinite(L.value))return{display:"none"};const r=`${L.value}px`;return Et({bar:s.value,size:r,move:l.traveled},t.layout)}),h=d(()=>Math.floor(t.clientSize-L.value-y(n))),W=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",p);const r=y(c);!r||(R=document.onselectstart,document.onselectstart=()=>!1,r.addEventListener("touchmove",S),r.addEventListener("touchend",p))},x=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",p),document.onselectstart=R,R=null;const r=y(c);!r||(r.removeEventListener("touchmove",S),r.removeEventListener("touchend",p))},O=r=>{r.stopImmediatePropagation(),!(r.ctrlKey||[1,2].includes(r.button))&&(l.isDragging=!0,l[s.value.axis]=r.currentTarget[s.value.offset]-(r[s.value.client]-r.currentTarget.getBoundingClientRect()[s.value.direction]),e("start-move"),W())},p=()=>{l.isDragging=!1,l[s.value.axis]=0,e("stop-move"),x()},S=r=>{const{isDragging:u}=l;if(!u||!c.value||!o.value)return;const f=l[s.value.axis];if(!f)return;st(C);const b=(o.value.getBoundingClientRect()[s.value.direction]-r[s.value.client])*-1,Y=c.value[s.value.offset]-f,D=b-Y;C=lt(()=>{l.traveled=Math.max(t.startGap,Math.min(D,h.value)),e("scroll",D,h.value)})},Z=r=>{const u=Math.abs(r.target.getBoundingClientRect()[s.value.direction]-r[s.value.client]),f=c.value[s.value.offset]/2,b=u-f;l.traveled=Math.max(0,Math.min(b,h.value)),e("scroll",b,h.value)};return et(()=>t.scrollFrom,r=>{l.isDragging||(l.traveled=Math.ceil(r*h.value))}),rt(()=>{x()}),()=>P("div",{role:"presentation",ref:o,class:[i.b(),t.class,(t.alwaysOn||l.isDragging)&&"always-on"],style:K.value,onMousedown:nt(Z,["stop","prevent"]),onTouchstartPrevent:O},P("div",{ref:c,class:a.e("thumb"),style:U.value,onMousedown:O},[]))}});export{It as A,mt as B,Dt as C,_t as D,Bt as E,dt as F,E as H,zt as I,H as R,Ct as S,k as V,$t as a,ht as b,vt as c,qt as d,gt as e,Ot as f,Gt as g,xt as h,Ht as i,Ft as j,yt as k,kt as l,wt as u,Pt as v};
