import{b as T}from"./index.5dbd068b.js";import{ElImageViewer as G}from"./index.184ea487.js";import{b as U,d as O}from"./runtime.a8d5aa72.js";import{m as Z}from"./typescript.c44ade1c.js";import{c as ee,e as te}from"./types.0ffe2429.js";import{_ as re}from"./plugin-vue_export-helper.b0b5f2d9.js";import{u as oe}from"./index.b1f4efad.js";import{f as $,a2 as ae,aI as se,p as u,aj as m,k as c,aJ as le,w as ne,H as ie,o as n,D as d,K as I,I as P,Q as ue,u as t,a4 as g,X as V,a6 as ce,Y as v,c as de,L as pe,R as fe,e as me,a8 as ve}from"./entry.40f94ce2.js";import{u as ye}from"./index.43dcf301.js";import{i as ge}from"./position.b7949450.js";import{g as we}from"./scroll.123f6305.js";import{w as he}from"./install.db378abc.js";import"./index.52232a07.js";import"./style.a7bf22e4.js";import"./index.e0b44930.js";import"./index.1eb5ee59.js";import"./aria.362daa0e.js";import"./objects.1e9cc2c5.js";import"./get.070bcf83.js";import"./_baseGet.57648035.js";import"./isArray.3fa80ba1.js";import"./isObject.5a18b265.js";import"./_baseSet.39436bc7.js";import"./_defineProperty.f71786e5.js";import"./_isIndex.f5af1eca.js";import"./throttle.d970eabc.js";import"./debounce.a43f57fe.js";const Le=U({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:O([String,Object])},previewSrcList:{type:O(Array),default:()=>Z([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),ke={load:s=>s instanceof Event,error:s=>s instanceof Event,switch:s=>ee(s),close:()=>!0,show:()=>!0},Se=["src","loading"],ze={key:0},Ie=$({name:"ElImage",inheritAttrs:!1}),Ee=$({...Ie,props:Le,emits:ke,setup(s,{emit:p}){const r=s;let E="";const{t:H}=oe(),l=ae("image"),M=se(),D=ye(),w=u(),f=u(!1),i=u(!0),h=u(!1),y=u(),a=u(),j=m&&"loading"in HTMLImageElement.prototype;let L,k;const F=c(()=>[l.e("inner"),S.value&&l.e("preview"),i.value&&l.is("loading")]),K=c(()=>M.style),R=c(()=>{const{fit:e}=r;return m&&e?{objectFit:e}:{}}),S=c(()=>{const{previewSrcList:e}=r;return Array.isArray(e)&&e.length>0}),Y=c(()=>{const{previewSrcList:e,initialIndex:o}=r;let N=o;return o>e.length-1&&(N=0),N}),b=c(()=>r.loading==="eager"?!1:!j&&r.loading==="lazy"||r.lazy),z=()=>{!m||(i.value=!0,f.value=!1,w.value=r.src)};function x(e){i.value=!1,f.value=!1,p("load",e)}function q(e){i.value=!1,f.value=!0,p("error",e)}function C(){ge(y.value,a.value)&&(z(),A())}const B=le(C,200,!0);async function _(){var e;if(!m)return;await me();const{scrollContainer:o}=r;te(o)?a.value=o:ve(o)&&o!==""?a.value=(e=document.querySelector(o))!=null?e:void 0:y.value&&(a.value=we(y.value)),a.value&&(L=T(a,"scroll",B),setTimeout(()=>C(),100))}function A(){!m||!a.value||!B||(L==null||L(),a.value=void 0)}function J(e){if(!!e.ctrlKey){if(e.deltaY<0)return e.preventDefault(),!1;if(e.deltaY>0)return e.preventDefault(),!1}}function Q(){!S.value||(k=T("wheel",J,{passive:!1}),E=document.body.style.overflow,document.body.style.overflow="hidden",h.value=!0,p("show"))}function W(){k==null||k(),document.body.style.overflow=E,h.value=!1,p("close")}function X(e){p("switch",e)}return ne(()=>r.src,()=>{b.value?(i.value=!0,f.value=!1,A(),_()):z()}),ie(()=>{b.value?_():z()}),(e,o)=>(n(),d("div",{ref_key:"container",ref:y,class:g([t(l).b(),e.$attrs.class]),style:fe(t(K))},[f.value?I(e.$slots,"error",{key:0},()=>[P("div",{class:g(t(l).e("error"))},ue(t(H)("el.image.error")),3)]):(n(),d(V,{key:1},[w.value!==void 0?(n(),d("img",ce({key:0},t(D),{src:w.value,loading:e.loading,style:t(R),class:t(F),onClick:Q,onLoad:x,onError:q}),null,16,Se)):v("v-if",!0),i.value?(n(),d("div",{key:1,class:g(t(l).e("wrapper"))},[I(e.$slots,"placeholder",{},()=>[P("div",{class:g(t(l).e("placeholder"))},null,2)])],2)):v("v-if",!0)],64)),t(S)?(n(),d(V,{key:2},[h.value?(n(),de(t(G),{key:0,"z-index":e.zIndex,"initial-index":t(Y),infinite:e.infinite,"zoom-rate":e.zoomRate,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:W,onSwitch:X},{default:pe(()=>[e.$slots.viewer?(n(),d("div",ze,[I(e.$slots,"viewer")])):v("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):v("v-if",!0)],64)):v("v-if",!0)],6))}});var be=re(Ee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const et=he(be);export{et as ElImage,et as default,ke as imageEmits,Le as imageProps};
