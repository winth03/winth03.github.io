import{p as w,k as P,u as e,w as K,aE as Se,H as ie,E as Ee,a3 as Ne,x as ue,a8 as Me,f as q,a2 as ce,o as $,D as R,I as F,c as oe,L as X,Z as Q,a4 as A,aK as W,S as Y,$ as Z,a7 as se,Y as U,K as fe,R as ve,X as Te,W as $e,Q as Ae,a5 as He,M as Le,v as Be}from"./entry.40f94ce2.js";import{ElIcon as re}from"./index.52232a07.js";import{ArrowLeft as Oe,ArrowRight as Pe}from"./index.e0b44930.js";import{b as me}from"./runtime.a8d5aa72.js";import{c as Re,a as Ve}from"./types.0ffe2429.js";import{u as ze}from"./index.5dbd068b.js";import{u as De}from"./index.1d99e464.js";import{t as ne}from"./throttle.d970eabc.js";import{_ as de}from"./plugin-vue_export-helper.b0b5f2d9.js";import{w as Ke,a as We}from"./install.db378abc.js";import"./style.a7bf22e4.js";import"./vnode.30b5e0bd.js";import"./debounce.a43f57fe.js";import"./isObject.5a18b265.js";const Ue=me({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),je={change:(s,H)=>[s,H].every(Re)},he=Symbol("carouselContextKey"),le=300,Fe=(s,H,i)=>{const{children:r,addChild:b,removeChild:p}=De(ue(),"ElCarouselItem"),n=w(-1),d=w(null),g=w(!1),y=w(),I=w(0),S=P(()=>s.arrow!=="never"&&!e(m)),N=P(()=>r.value.some(t=>t.props.label.toString().length>0)),k=P(()=>s.type==="card"),m=P(()=>s.direction==="vertical"),L=P(()=>s.height!=="auto"?{height:s.height}:{height:`${I.value}px`,overflow:"hidden"}),_=ne(t=>{o(t)},le,{trailing:!0}),E=ne(t=>{V(t)},le);function M(){d.value&&(clearInterval(d.value),d.value=null)}function B(){s.interval<=0||!s.autoplay||d.value||(d.value=setInterval(()=>l(),s.interval))}const l=()=>{n.value<r.value.length-1?n.value=n.value+1:s.loop&&(n.value=0)};function o(t){if(Me(t)){const z=r.value.filter(j=>j.props.name===t);z.length>0&&(t=r.value.indexOf(z[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const v=r.value.length,T=n.value;t<0?n.value=s.loop?v-1:0:t>=v?n.value=s.loop?0:v-1:n.value=t,T===n.value&&f(T),x()}function f(t){r.value.forEach((v,T)=>{v.translateItem(T,n.value,t)})}function a(t,v){var T,z,j,ee;const D=e(r),te=D.length;if(te===0||!t.states.inStage)return!1;const Ie=v+1,Ce=v-1,ae=te-1,we=D[ae].states.active,ke=D[0].states.active,be=(z=(T=D[Ie])==null?void 0:T.states)==null?void 0:z.active,_e=(ee=(j=D[Ce])==null?void 0:j.states)==null?void 0:ee.active;return v===ae&&ke||be?"left":v===0&&we||_e?"right":!1}function C(){g.value=!0,s.pauseOnHover&&M()}function O(){g.value=!1,B()}function u(t){e(m)||r.value.forEach((v,T)=>{t===a(v,T)&&(v.states.hover=!0)})}function c(){e(m)||r.value.forEach(t=>{t.states.hover=!1})}function h(t){n.value=t}function V(t){s.trigger==="hover"&&t!==n.value&&(n.value=t)}function G(){o(n.value-1)}function ge(){o(n.value+1)}function x(){M(),B()}function ye(t){s.height==="auto"&&(I.value=t)}K(()=>n.value,(t,v)=>{f(v),v>-1&&H("change",t,v)}),K(()=>s.autoplay,t=>{t?B():M()}),K(()=>s.loop,()=>{o(n.value)}),K(()=>s.interval,()=>{x()}),K(()=>r.value,()=>{r.value.length>0&&o(s.initialIndex)});const J=Se();return ie(()=>{J.value=ze(y.value,()=>{f()}),B()}),Ee(()=>{M(),y.value&&J.value&&J.value.stop()}),Ne(he,{root:y,isCardType:k,isVertical:m,items:r,loop:s.loop,addItem:b,removeItem:p,setActiveItem:o,setContainerHeight:ye}),{root:y,activeIndex:n,arrowDisplay:S,hasLabel:N,hover:g,isCardType:k,items:r,isVertical:m,containerStyle:L,handleButtonEnter:u,handleButtonLeave:c,handleIndicatorClick:h,handleMouseEnter:C,handleMouseLeave:O,setActiveItem:o,prev:G,next:ge,throttledArrowClick:_,throttledIndicatorHover:E}},Xe=["onMouseenter","onClick"],Ye={key:0},Qe="ElCarousel",Ze=q({name:Qe}),qe=q({...Ze,props:Ue,emits:je,setup(s,{expose:H,emit:i}){const r=s,{root:b,activeIndex:p,arrowDisplay:n,hasLabel:d,hover:g,isCardType:y,items:I,isVertical:S,containerStyle:N,handleButtonEnter:k,handleButtonLeave:m,handleIndicatorClick:L,handleMouseEnter:_,handleMouseLeave:E,setActiveItem:M,prev:B,next:l,throttledArrowClick:o,throttledIndicatorHover:f}=Fe(r,i),a=ce("carousel"),C=P(()=>{const u=[a.b(),a.m(r.direction)];return e(y)&&u.push(a.m("card")),u}),O=P(()=>{const u=[a.e("indicators"),a.em("indicators",r.direction)];return e(d)&&u.push(a.em("indicators","labels")),r.indicatorPosition==="outside"&&u.push(a.em("indicators","outside")),e(S)&&u.push(a.em("indicators","right")),u});return H({setActiveItem:M,prev:B,next:l}),(u,c)=>($(),R("div",{ref_key:"root",ref:b,class:A(e(C)),onMouseenter:c[6]||(c[6]=W((...h)=>e(_)&&e(_)(...h),["stop"])),onMouseleave:c[7]||(c[7]=W((...h)=>e(E)&&e(E)(...h),["stop"]))},[F("div",{class:A(e(a).e("container")),style:ve(e(N))},[e(n)?($(),oe(se,{key:0,name:"carousel-arrow-left",persisted:""},{default:X(()=>[Q(F("button",{type:"button",class:A([e(a).e("arrow"),e(a).em("arrow","left")]),onMouseenter:c[0]||(c[0]=h=>e(k)("left")),onMouseleave:c[1]||(c[1]=(...h)=>e(m)&&e(m)(...h)),onClick:c[2]||(c[2]=W(h=>e(o)(e(p)-1),["stop"]))},[Y(e(re),null,{default:X(()=>[Y(e(Oe))]),_:1})],34),[[Z,(u.arrow==="always"||e(g))&&(r.loop||e(p)>0)]])]),_:1})):U("v-if",!0),e(n)?($(),oe(se,{key:1,name:"carousel-arrow-right",persisted:""},{default:X(()=>[Q(F("button",{type:"button",class:A([e(a).e("arrow"),e(a).em("arrow","right")]),onMouseenter:c[3]||(c[3]=h=>e(k)("right")),onMouseleave:c[4]||(c[4]=(...h)=>e(m)&&e(m)(...h)),onClick:c[5]||(c[5]=W(h=>e(o)(e(p)+1),["stop"]))},[Y(e(re),null,{default:X(()=>[Y(e(Pe))]),_:1})],34),[[Z,(u.arrow==="always"||e(g))&&(r.loop||e(p)<e(I).length-1)]])]),_:1})):U("v-if",!0),fe(u.$slots,"default")],6),u.indicatorPosition!=="none"?($(),R("ul",{key:0,class:A(e(O))},[($(!0),R(Te,null,$e(e(I),(h,V)=>($(),R("li",{key:V,class:A([e(a).e("indicator"),e(a).em("indicator",u.direction),e(a).is("active",V===e(p))]),onMouseenter:G=>e(f)(V),onClick:W(G=>e(L)(V),["stop"])},[F("button",{class:A(e(a).e("button"))},[e(d)?($(),R("span",Ye,Ae(h.props.label),1)):U("v-if",!0)],2)],42,Xe))),128))],2)):U("v-if",!0)],34))}});var Ge=de(qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const Je=me({name:{type:String,default:""},label:{type:[String,Number],default:""}}),xe=(s,H)=>{const i=He(he),r=ue(),b=.83,p=w(),n=w(!1),d=w(0),g=w(1),y=w(!1),I=w(!1),S=w(!1),N=w(!1),{isCardType:k,isVertical:m}=i;function L(l,o,f){const a=f-1,C=o-1,O=o+1,u=f/2;return o===0&&l===a?-1:o===a&&l===0?f:l<C&&o-l>=u?f+1:l>O&&l-o>=u?-2:l}function _(l,o){var f,a;const C=e(m)?((f=i.root.value)==null?void 0:f.offsetHeight)||0:((a=i.root.value)==null?void 0:a.offsetWidth)||0;return S.value?C*((2-b)*(l-o)+1)/4:l<o?-(1+b)*C/4:(3+b)*C/4}function E(l,o,f){const a=i.root.value;return a?((f?a.offsetHeight:a.offsetWidth)||0)*(l-o):0}const M=(l,o,f)=>{var a;const C=e(k),O=(a=i.items.value.length)!=null?a:Number.NaN,u=l===o;!C&&!Ve(f)&&(N.value=u||l===f),!u&&O>2&&i.loop&&(l=L(l,o,O));const c=e(m);y.value=u,C?(S.value=Math.round(Math.abs(l-o))<=1,d.value=_(l,o),g.value=e(y)?1:b):d.value=E(l,o,c),I.value=!0,u&&p.value&&i.setContainerHeight(p.value.offsetHeight)};function B(){if(i&&e(k)){const l=i.items.value.findIndex(({uid:o})=>o===r.uid);i.setActiveItem(l)}}return ie(()=>{i.addItem({props:s,states:Le({hover:n,translate:d,scale:g,active:y,ready:I,inStage:S,animating:N}),uid:r.uid,translateItem:M})}),Be(()=>{i.removeItem(r.uid)}),{carouselItemRef:p,active:y,animating:N,hover:n,inStage:S,isVertical:m,translate:d,isCardType:k,scale:g,ready:I,handleItemClick:B}},et=q({name:"ElCarouselItem"}),tt=q({...et,props:Je,setup(s){const H=s,i=ce("carousel"),{carouselItemRef:r,active:b,animating:p,hover:n,inStage:d,isVertical:g,translate:y,isCardType:I,scale:S,ready:N,handleItemClick:k}=xe(H),m=P(()=>{const _=`${`translate${e(g)?"Y":"X"}`}(${e(y)}px)`,E=`scale(${e(S)})`;return{transform:[_,E].join(" ")}});return(L,_)=>Q(($(),R("div",{ref_key:"carouselItemRef",ref:r,class:A([e(i).e("item"),e(i).is("active",e(b)),e(i).is("in-stage",e(d)),e(i).is("hover",e(n)),e(i).is("animating",e(p)),{[e(i).em("item","card")]:e(I),[e(i).em("item","card-vertical")]:e(I)&&e(g)}]),style:ve(e(m)),onClick:_[0]||(_[0]=(...E)=>e(k)&&e(k)(...E))},[e(I)?Q(($(),R("div",{key:0,class:A(e(i).e("mask"))},null,2)),[[Z,!e(b)]]):U("v-if",!0),fe(L.$slots,"default")],6)),[[Z,e(N)]])}});var pe=de(tt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const pt=Ke(Ge,{CarouselItem:pe}),gt=We(pe);export{pt as ElCarousel,gt as ElCarouselItem,he as carouselContextKey,je as carouselEmits,Je as carouselItemProps,Ue as carouselProps,pt as default};
