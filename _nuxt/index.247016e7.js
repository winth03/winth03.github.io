import{b as P}from"./index.785ddeeb.js";import{ElImageViewer as J}from"./index.6f1388a7.js";import{b as U,d as T}from"./runtime.ca6a5e5a.js";import{m as X}from"./typescript.c44ade1c.js";import{i as ee,e as te}from"./types.bb628c62.js";import{_ as re}from"./plugin-vue_export-helper.b0b5f2d9.js";import{u as oe}from"./index.fd65d236.js";import{i as V,f as ae,aL as se,b as u,I as p,h as c,aM as le,e as ie,S as ne,o as i,j as d,r as b,m as M,t as ue,u as t,k as g,L as O,A as ce,P as v,c as de,w as fe,Q as me,Z as pe,F as ve}from"./entry.b33cb278.js";import{u as ye}from"./index.0bdbd461.js";import{i as ge}from"./position.c5072694.js";import{g as we}from"./scroll.edc775c4.js";import{w as he}from"./install.187cf5b6.js";import"./index.960dedfd.js";import"./style.6fe07f58.js";import"./index.dc3cf8fc.js";import"./index.8e2f8365.js";import"./aria.362daa0e.js";import"./objects.1e9cc2c5.js";import"./get.070bcf83.js";import"./_baseGet.57648035.js";import"./isArray.3fa80ba1.js";import"./isObject.5a18b265.js";import"./_baseSet.39436bc7.js";import"./_defineProperty.f71786e5.js";import"./_isIndex.f5af1eca.js";import"./throttle.d970eabc.js";import"./debounce.a43f57fe.js";const Le=U({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:T([String,Object])},previewSrcList:{type:T(Array),default:()=>X([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),ke={load:s=>s instanceof Event,error:s=>s instanceof Event,switch:s=>ee(s),close:()=>!0,show:()=>!0},Se=["src","loading"],ze={key:0},be=V({name:"ElImage",inheritAttrs:!1}),Ee=V({...be,props:Le,emits:ke,setup(s,{emit:f}){const r=s;let E="";const{t:$}=oe(),l=ae("image"),F=se(),H=ye(),w=u(),m=u(!1),n=u(!0),h=u(!1),y=u(),a=u(),j=p&&"loading"in HTMLImageElement.prototype;let L,k;const D=c(()=>[l.e("inner"),S.value&&l.e("preview"),n.value&&l.is("loading")]),x=c(()=>F.style),K=c(()=>{const{fit:e}=r;return p&&e?{objectFit:e}:{}}),S=c(()=>{const{previewSrcList:e}=r;return Array.isArray(e)&&e.length>0}),R=c(()=>{const{previewSrcList:e,initialIndex:o}=r;let N=o;return o>e.length-1&&(N=0),N}),I=c(()=>r.loading==="eager"?!1:!j&&r.loading==="lazy"||r.lazy),z=()=>{!p||(n.value=!0,m.value=!1,w.value=r.src)};function Y(e){n.value=!1,m.value=!1,f("load",e)}function q(e){n.value=!1,m.value=!0,f("error",e)}function C(){ge(y.value,a.value)&&(z(),_())}const B=le(C,200,!0);async function A(){var e;if(!p)return;await pe();const{scrollContainer:o}=r;te(o)?a.value=o:ve(o)&&o!==""?a.value=(e=document.querySelector(o))!=null?e:void 0:y.value&&(a.value=we(y.value)),a.value&&(L=P(a,"scroll",B),setTimeout(()=>C(),100))}function _(){!p||!a.value||!B||(L==null||L(),a.value=void 0)}function Q(e){if(!!e.ctrlKey){if(e.deltaY<0)return e.preventDefault(),!1;if(e.deltaY>0)return e.preventDefault(),!1}}function W(){!S.value||(k=P("wheel",Q,{passive:!1}),E=document.body.style.overflow,document.body.style.overflow="hidden",h.value=!0,f("show"))}function Z(){k==null||k(),document.body.style.overflow=E,h.value=!1,f("close")}function G(e){f("switch",e)}return ie(()=>r.src,()=>{I.value?(n.value=!0,m.value=!1,_(),A()):z()}),ne(()=>{I.value?A():z()}),(e,o)=>(i(),d("div",{ref_key:"container",ref:y,class:g([t(l).b(),e.$attrs.class]),style:me(t(x))},[m.value?b(e.$slots,"error",{key:0},()=>[M("div",{class:g(t(l).e("error"))},ue(t($)("el.image.error")),3)]):(i(),d(O,{key:1},[w.value!==void 0?(i(),d("img",ce({key:0},t(H),{src:w.value,loading:e.loading,style:t(K),class:t(D),onClick:W,onLoad:Y,onError:q}),null,16,Se)):v("v-if",!0),n.value?(i(),d("div",{key:1,class:g(t(l).e("wrapper"))},[b(e.$slots,"placeholder",{},()=>[M("div",{class:g(t(l).e("placeholder"))},null,2)])],2)):v("v-if",!0)],64)),t(S)?(i(),d(O,{key:2},[h.value?(i(),de(t(J),{key:0,"z-index":e.zIndex,"initial-index":t(R),infinite:e.infinite,"zoom-rate":e.zoomRate,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:Z,onSwitch:G},{default:fe(()=>[e.$slots.viewer?(i(),d("div",ze,[b(e.$slots,"viewer")])):v("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):v("v-if",!0)],64)):v("v-if",!0)],6))}});var Ie=re(Ee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const et=he(Ie);export{et as ElImage,et as default,ke as imageEmits,Le as imageProps};
