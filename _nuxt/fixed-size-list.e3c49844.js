import{H as ht,V as mt,j as St,I as nt,S as ct,u as vt,l as st,R as tt,a as rt,b as gt,c as it,d as Ot,B as Tt,F as wt,g as et,A as lt,e as Et,C as ft,E as Mt,f as Rt,h as yt}from"./scrollbar.3e720c3e.js";import{c as xt,r as Lt}from"./raf.961fe51d.js";import{i as It}from"./browser.d39506a1.js";import{f as bt,a2 as _t,p as k,k as w,u as o,H as At,aj as zt,aL as Nt,P as ut,j,a8 as dt,x as Ct,e as U,ae as Ft}from"./entry.40f94ce2.js";import{c as K}from"./types.0ffe2429.js";const Dt={[ht]:"deltaX",[mt]:"deltaY"},kt=({atEndEdge:r,atStartEdge:d,layout:S},I)=>{let E,h=0;const v=c=>c<0&&d.value||c>0&&r.value;return{hasReachedEdge:v,onWheel:c=>{xt(E);const O=c[Dt[S.value]];v(h)&&v(h+O)||(h+=O,It()||c.preventDefault(),E=Lt(()=>{I(h),h=0}))}}},Wt=({name:r,getOffset:d,getItemSize:S,getItemOffset:I,getEstimatedTotalSize:E,getStartIndexForOffset:h,getStopIndexForStartIndex:v,initCache:g,clearCache:c,validateProps:O})=>bt({name:r!=null?r:"ElVirtualList",props:St,emits:[nt,ct],setup(e,{emit:m,expose:M}){O(e);const X=Ct(),C=_t("vl"),R=k(g(e,X)),F=vt(),b=k(),W=k(),$=k(),n=k({isScrolling:!1,scrollDir:"forward",scrollOffset:K(e.initScrollOffset)?e.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:e.scrollbarAlwaysOn}),H=w(()=>{const{total:t,cache:s}=e,{isScrolling:l,scrollDir:u,scrollOffset:a}=o(n);if(t===0)return[0,0,0,0];const i=h(e,a,o(R)),f=v(e,i,a,o(R)),z=!l||u===Tt?Math.max(1,s):1,N=!l||u===wt?Math.max(1,s):1;return[Math.max(0,i-z),Math.max(0,Math.min(t-1,f+N)),i,f]}),T=w(()=>E(e,o(R))),y=w(()=>st(e.layout)),Y=w(()=>[{position:"relative",[`overflow-${y.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:e.direction,height:K(e.height)?`${e.height}px`:e.height,width:K(e.width)?`${e.width}px`:e.width},e.style]),Z=w(()=>{const t=o(T),s=o(y);return{height:s?"100%":`${t}px`,pointerEvents:o(n).isScrolling?"none":void 0,width:s?`${t}px`:"100%"}}),x=w(()=>y.value?e.width:e.height),{onWheel:J}=kt({atStartEdge:w(()=>n.value.scrollOffset<=0),atEndEdge:w(()=>n.value.scrollOffset>=T.value),layout:w(()=>e.layout)},t=>{var s,l;(l=(s=$.value).onMouseUp)==null||l.call(s),L(Math.min(n.value.scrollOffset+t,T.value-x.value))}),V=()=>{const{total:t}=e;if(t>0){const[a,i,f,z]=o(H);m(nt,a,i,f,z)}const{scrollDir:s,scrollOffset:l,updateRequested:u}=o(n);m(ct,s,l,u)},q=t=>{const{clientHeight:s,scrollHeight:l,scrollTop:u}=t.currentTarget,a=o(n);if(a.scrollOffset===u)return;const i=Math.max(0,Math.min(u,l-s));n.value={...a,isScrolling:!0,scrollDir:et(a.scrollOffset,i),scrollOffset:i,updateRequested:!1},U(D)},Q=t=>{const{clientWidth:s,scrollLeft:l,scrollWidth:u}=t.currentTarget,a=o(n);if(a.scrollOffset===l)return;const{direction:i}=e;let f=l;if(i===tt)switch(rt()){case it:{f=-l;break}case Et:{f=u-s-l;break}}f=Math.max(0,Math.min(f,u-s)),n.value={...a,isScrolling:!0,scrollDir:et(a.scrollOffset,f),scrollOffset:f,updateRequested:!1},U(D)},p=t=>{o(y)?Q(t):q(t),V()},G=(t,s)=>{const l=(T.value-x.value)/s*t;L(Math.min(T.value-x.value,l))},L=t=>{t=Math.max(t,0),t!==o(n).scrollOffset&&(n.value={...o(n),scrollOffset:t,scrollDir:et(o(n).scrollOffset,t),updateRequested:!0},U(D))},A=(t,s=lt)=>{const{scrollOffset:l}=o(n);t=Math.max(0,Math.min(t,e.total-1)),L(d(e,t,s,l,o(R)))},P=t=>{const{direction:s,itemSize:l,layout:u}=e,a=F.value(c&&l,c&&u,c&&s);let i;if(Ft(a,String(t)))i=a[t];else{const f=I(e,t,o(R)),z=S(e,t,o(R)),N=o(y),at=s===tt,ot=N?f:0;a[t]=i={position:"absolute",left:at?void 0:`${ot}px`,right:at?`${ot}px`:void 0,top:N?0:`${f}px`,height:N?"100%":`${z}px`,width:N?`${z}px`:"100%"}}return i},D=()=>{n.value.isScrolling=!1,U(()=>{F.value(-1,null,null)})},B=()=>{const t=b.value;t&&(t.scrollTop=0)};At(()=>{if(!zt)return;const{initScrollOffset:t}=e,s=o(b);K(t)&&s&&(o(y)?s.scrollLeft=t:s.scrollTop=t),V()}),Nt(()=>{const{direction:t,layout:s}=e,{scrollOffset:l,updateRequested:u}=o(n),a=o(b);if(u&&a)if(s===ht)if(t===tt)switch(rt()){case it:{a.scrollLeft=-l;break}case gt:{a.scrollLeft=l;break}default:{const{clientWidth:i,scrollWidth:f}=a;a.scrollLeft=f-i-l;break}}else a.scrollLeft=l;else a.scrollTop=l});const _={ns:C,clientSize:x,estimatedTotalSize:T,windowStyle:Y,windowRef:b,innerRef:W,innerStyle:Z,itemsToRender:H,scrollbarRef:$,states:n,getItemStyle:P,onScroll:p,onScrollbarScroll:G,onWheel:J,scrollTo:L,scrollToItem:A,resetScrollTop:B};return M({windowRef:b,innerRef:W,getItemStyleCache:F,scrollTo:L,scrollToItem:A,resetScrollTop:B,states:n}),_},render(e){var m;const{$slots:M,className:X,clientSize:C,containerElement:R,data:F,getItemStyle:b,innerElement:W,itemsToRender:$,innerStyle:n,layout:H,total:T,onScroll:y,onScrollbarScroll:Y,onWheel:Z,states:x,useIsScrolling:J,windowStyle:V,ns:q}=e,[Q,p]=$,G=ut(R),L=ut(W),A=[];if(T>0)for(let _=Q;_<=p;_++)A.push((m=M.default)==null?void 0:m.call(M,{data:F,key:_,index:_,isScrolling:J?x.isScrolling:void 0,style:b(_)}));const P=[j(L,{style:n,ref:"innerRef"},dt(L)?A:{default:()=>A})],D=j(Ot,{ref:"scrollbarRef",clientSize:C,layout:H,onScroll:Y,ratio:C*100/this.estimatedTotalSize,scrollFrom:x.scrollOffset/(this.estimatedTotalSize-C),total:T}),B=j(G,{class:[q.e("window"),X],style:V,onScroll:y,onWheel:Z,ref:"windowRef",key:0},dt(G)?[P]:{default:()=>[P]});return j("div",{key:0,class:[q.e("wrapper"),x.scrollbarAlwaysOn?"always-on":""]},[B,D])}}),Pt=Wt({name:"ElFixedSizeList",getItemOffset:({itemSize:r},d)=>d*r,getItemSize:({itemSize:r})=>r,getEstimatedTotalSize:({total:r,itemSize:d})=>d*r,getOffset:({height:r,total:d,itemSize:S,layout:I,width:E},h,v,g)=>{const c=st(I)?E:r,O=Math.max(0,d*S-c),e=Math.min(O,h*S),m=Math.max(0,(h+1)*S-c);switch(v===yt&&(g>=m-c&&g<=e+c?v=lt:v=ft),v){case Rt:return e;case Mt:return m;case ft:{const M=Math.round(m+(e-m)/2);return M<Math.ceil(c/2)?0:M>O+Math.floor(c/2)?O:M}case lt:default:return g>=m&&g<=e?g:g<m?m:e}},getStartIndexForOffset:({total:r,itemSize:d},S)=>Math.max(0,Math.min(r-1,Math.floor(S/d))),getStopIndexForStartIndex:({height:r,total:d,itemSize:S,layout:I,width:E},h,v)=>{const g=h*S,c=st(I)?E:r,O=Math.ceil((c+v-g)/S);return Math.max(0,Math.min(d-1,h+O-1))},initCache(){},clearCache:!0,validateProps(){}});export{Pt as F,Wt as c};
