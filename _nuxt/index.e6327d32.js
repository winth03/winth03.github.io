import{ElButton as I,ElButtonGroup as ee}from"./index.cd370c59.js";import{r as E}from"./utils.5d6cb5fc.js";import{b as G,d as x}from"./runtime.a8d5aa72.js";import{aa as te,k as w,f as B,a2 as z,o as f,D as g,X as L,W as Y,Q as _,u as t,Y as Q,I as T,a4 as S,K as O,h as ae,p as se,aS as U,as as ne,S as N,L as C,U as W,aR as K,n as A,a6 as R,c as oe}from"./entry.40f94ce2.js";import{d as P}from"./dayjs.min.6a4959ec.js";import{l as re,W as F}from"./localeData.ff30cb06.js";import{u as H}from"./index.b1f4efad.js";import{_ as X}from"./plugin-vue_export-helper.b0b5f2d9.js";import{I as J,U as Z}from"./event.e54e7e4a.js";import{u as le}from"./index.d26d92fd.js";import{w as ce}from"./install.db378abc.js";import"./index.52232a07.js";import"./types.0ffe2429.js";import"./style.a7bf22e4.js";import"./use-global-config.be3c3615.js";import"./index.1eb5ee59.js";import"./index.f72caa6f.js";import"./size.007424cf.js";import"./objects.1e9cc2c5.js";import"./get.070bcf83.js";import"./_baseGet.57648035.js";import"./isArray.3fa80ba1.js";import"./isObject.5a18b265.js";import"./_baseSet.39436bc7.js";import"./_defineProperty.f71786e5.js";import"./_isIndex.f5af1eca.js";import"./use-form-item.eeb4683c.js";import"./constants.e2ce9b61.js";import"./use-form-common-props.c0d2009e.js";import"./index.e0b44930.js";import"./icon.aaa9d058.js";import"./index.3e0aacb0.js";import"./_commonjsHelpers.eecb6206.js";const de=(e,l)=>{const u=e.subtract(1,"month").endOf("month").date();return E(l).map((d,i)=>u-(l-i-1))},ie=e=>{const l=e.daysInMonth();return E(l).map((u,d)=>d+1)},me=e=>E(e.length/7).map(l=>{const u=l*7;return e.slice(u,u+7)}),ue=G({selectedDay:{type:x(Object)},range:{type:x(Array)},date:{type:x(Object),required:!0},hideHeader:{type:Boolean}}),pe={pick:e=>te(e)},ye=(e,l)=>{P.extend(re);const u=P.localeData().firstDayOfWeek(),{t:d,lang:i}=H(),D=P().locale(i.value),h=w(()=>!!e.range&&!!e.range.length),k=w(()=>{let s=[];if(h.value){const[a,n]=e.range,c=E(n.date()-a.date()+1).map(r=>({text:a.date()+r,type:"current"}));let m=c.length%7;m=m===0?0:7-m;const o=E(m).map((r,p)=>({text:p+1,type:"next"}));s=c.concat(o)}else{const a=e.date.startOf("month").day(),n=de(e.date,(a-u+7)%7).map(r=>({text:r,type:"prev"})),c=ie(e.date).map(r=>({text:r,type:"current"}));s=[...n,...c];const m=7-(s.length%7||7),o=E(m).map((r,p)=>({text:p+1,type:"next"}));s=s.concat(o)}return me(s)}),M=w(()=>{const s=u;return s===0?F.map(a=>d(`el.datepicker.weeks.${a}`)):F.slice(s).concat(F.slice(0,s)).map(a=>d(`el.datepicker.weeks.${a}`))}),y=(s,a)=>{switch(a){case"prev":return e.date.startOf("month").subtract(1,"month").date(s);case"next":return e.date.startOf("month").add(1,"month").date(s);case"current":return e.date.date(s)}};return{now:D,isInRange:h,rows:k,weekDays:M,getFormattedDate:y,handlePickDay:({text:s,type:a})=>{const n=y(s,a);l("pick",n)},getSlotData:({text:s,type:a})=>{const n=y(s,a);return{isSelected:n.isSame(e.selectedDay),type:`${a}-month`,day:n.format("YYYY-MM-DD"),date:n.toDate()}}}},he={key:0},fe=["onClick"],De=B({name:"DateTable"}),ke=B({...De,props:ue,emits:pe,setup(e,{expose:l,emit:u}){const d=e,{isInRange:i,now:D,rows:h,weekDays:k,getFormattedDate:M,handlePickDay:y,getSlotData:b}=ye(d,u),v=z("calendar-table"),s=z("calendar-day"),a=({text:n,type:c})=>{const m=[c];if(c==="current"){const o=M(n,c);o.isSame(d.selectedDay,"day")&&m.push(s.is("selected")),o.isSame(D,"day")&&m.push(s.is("today"))}return m};return l({getFormattedDate:M}),(n,c)=>(f(),g("table",{class:S([t(v).b(),t(v).is("range",t(i))]),cellspacing:"0",cellpadding:"0"},[n.hideHeader?Q("v-if",!0):(f(),g("thead",he,[(f(!0),g(L,null,Y(t(k),m=>(f(),g("th",{key:m},_(m),1))),128))])),T("tbody",null,[(f(!0),g(L,null,Y(t(h),(m,o)=>(f(),g("tr",{key:o,class:S({[t(v).e("row")]:!0,[t(v).em("row","hide-border")]:o===0&&n.hideHeader})},[(f(!0),g(L,null,Y(m,(r,p)=>(f(),g("td",{key:p,class:S(a(r)),onClick:$=>t(y)(r)},[T("div",{class:S(t(s).b())},[O(n.$slots,"date-cell",{data:t(b)(r)},()=>[T("span",null,_(r.text),1)])],2)],10,fe))),128))],2))),128))])],2))}});var q=X(ke,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const ve=(e,l)=>{const u=e.endOf("month"),d=l.startOf("month"),D=u.isSame(d,"week")?d.add(1,"week"):d;return[[e,u],[D.startOf("week"),l]]},ge=(e,l)=>{const u=e.endOf("month"),d=e.add(1,"month").startOf("month"),i=u.isSame(d,"week")?d.add(1,"week"):d,D=i.endOf("month"),h=l.startOf("month"),k=D.isSame(h,"week")?h.add(1,"week"):h;return[[e,u],[i.startOf("week"),D],[k.startOf("week"),l]]},Me=(e,l,u)=>{const d=ae(),{lang:i}=H(),D=se(),h=P().locale(i.value),k=w({get(){return e.modelValue?y.value:D.value},set(o){if(!o)return;D.value=o;const r=o.toDate();l(J,r),l(Z,r)}}),M=w(()=>{if(!e.range)return[];const o=e.range.map($=>P($).locale(i.value)),[r,p]=o;return r.isAfter(p)?[]:r.isSame(p,"month")?n(r,p):r.add(1,"month").month()!==p.month()?[]:n(r,p)}),y=w(()=>e.modelValue?P(e.modelValue).locale(i.value):k.value||(M.value.length?M.value[0][0]:h)),b=w(()=>y.value.subtract(1,"month").date(1)),v=w(()=>y.value.add(1,"month").date(1)),s=w(()=>y.value.subtract(1,"year").date(1)),a=w(()=>y.value.add(1,"year").date(1)),n=(o,r)=>{const p=o.startOf("week"),$=r.endOf("week"),V=p.get("month"),j=$.get("month");return V===j?[[p,$]]:(V+1)%12===j?ve(p,$):V+2===j||(V+1)%11===j?ge(p,$):[]},c=o=>{k.value=o},m=o=>{const p={"prev-month":b.value,"next-month":v.value,"prev-year":s.value,"next-year":a.value,today:h}[o];p.isSame(y.value,"day")||c(p)};return le({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},w(()=>!!d.dateCell)),{calculateValidatedDateRange:n,date:y,realSelectedDay:k,pickDay:c,selectDate:m,validatedRange:M}},we=e=>ne(e)&&e.length===2&&e.every(l=>U(l)),Se=G({modelValue:{type:Date},range:{type:x(Array),validator:we}}),be={[Z]:e=>U(e),[J]:e=>U(e)},$e="ElCalendar",Ce=B({name:$e}),Oe=B({...Ce,props:Se,emits:be,setup(e,{expose:l,emit:u}){const d=e,i=z("calendar"),{calculateValidatedDateRange:D,date:h,pickDay:k,realSelectedDay:M,selectDate:y,validatedRange:b}=Me(d,u),{t:v}=H(),s=w(()=>{const a=`el.datepicker.month${h.value.format("M")}`;return`${h.value.year()} ${v("el.datepicker.year")} ${v(a)}`});return l({selectedDay:M,pickDay:k,selectDate:y,calculateValidatedDateRange:D}),(a,n)=>(f(),g("div",{class:S(t(i).b())},[T("div",{class:S(t(i).e("header"))},[O(a.$slots,"header",{date:t(s)},()=>[T("div",{class:S(t(i).e("title"))},_(t(s)),3),t(b).length===0?(f(),g("div",{key:0,class:S(t(i).e("button-group"))},[N(t(ee),null,{default:C(()=>[N(t(I),{size:"small",onClick:n[0]||(n[0]=c=>t(y)("prev-month"))},{default:C(()=>[W(_(t(v)("el.datepicker.prevMonth")),1)]),_:1}),N(t(I),{size:"small",onClick:n[1]||(n[1]=c=>t(y)("today"))},{default:C(()=>[W(_(t(v)("el.datepicker.today")),1)]),_:1}),N(t(I),{size:"small",onClick:n[2]||(n[2]=c=>t(y)("next-month"))},{default:C(()=>[W(_(t(v)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):Q("v-if",!0)])],2),t(b).length===0?(f(),g("div",{key:0,class:S(t(i).e("body"))},[N(q,{date:t(h),"selected-day":t(M),onPick:t(k)},K({_:2},[a.$slots["date-cell"]||a.$slots.dateCell?{name:"date-cell",fn:C(c=>[a.$slots["date-cell"]?O(a.$slots,"date-cell",A(R({key:0},c))):O(a.$slots,"dateCell",A(R({key:1},c)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(f(),g("div",{key:1,class:S(t(i).e("body"))},[(f(!0),g(L,null,Y(t(b),(c,m)=>(f(),oe(q,{key:m,date:c[0],"selected-day":t(M),range:c,"hide-header":m!==0,onPick:t(k)},K({_:2},[a.$slots["date-cell"]||a.$slots.dateCell?{name:"date-cell",fn:C(o=>[a.$slots["date-cell"]?O(a.$slots,"date-cell",A(R({key:0},o))):O(a.$slots,"dateCell",A(R({key:1},o)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var _e=X(Oe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const ct=ce(_e);export{ct as ElCalendar,be as calendarEmits,Se as calendarProps,ct as default};
