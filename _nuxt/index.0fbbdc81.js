import{b as O,u as J}from"./index.785ddeeb.js";import{B as ee,r as te,G as g}from"./util.c8753e63.js";import{B as Ye,G as Ge,r as Ue}from"./util.c8753e63.js";import{i as C,l as ae,f as q,b as u,h as w,ae as le,V as X,o as k,c as W,w as F,x as se,m as j,k as T,u as f,Q as D,y as oe,T as re,I as ne,j as Q,v as Y,L as ie,e as G,Z as U,p as ue,ah as ce,S as me,aN as ve,r as fe,O as de,P as pe,E as he}from"./entry.b33cb278.js";import{b as $,d as be}from"./runtime.ca6a5e5a.js";import{_ as K}from"./plugin-vue_export-helper.b0b5f2d9.js";import{t as ye}from"./error.6c36bb34.js";import{i as E}from"./types.bb628c62.js";import{a as V}from"./style.6fe07f58.js";import{w as ge}from"./install.187cf5b6.js";const Z=Symbol("scrollbarContextKey"),we=$({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Se="Thumb",_e=C({__name:"thumb",props:we,setup(d){const c=d,i=ae(Z),l=q("scrollbar");i||ye(Se,"can not inject scrollbar context");const n=u(),m=u(),o=u({}),v=u(!1);let a=!1,h=!1,b=ne?document.onselectstart:null;const t=w(()=>ee[c.vertical?"vertical":"horizontal"]),S=w(()=>te({size:c.size,move:c.move,bar:t.value})),_=w(()=>n.value[t.value.offset]**2/i.wrapElement[t.value.scrollSize]/c.ratio/m.value[t.value.offset]),P=s=>{var e;if(s.stopPropagation(),s.ctrlKey||[1,2].includes(s.button))return;(e=window.getSelection())==null||e.removeAllRanges(),x(s);const r=s.currentTarget;!r||(o.value[t.value.axis]=r[t.value.offset]-(s[t.value.client]-r.getBoundingClientRect()[t.value.direction]))},L=s=>{if(!m.value||!n.value||!i.wrapElement)return;const e=Math.abs(s.target.getBoundingClientRect()[t.value.direction]-s[t.value.client]),r=m.value[t.value.offset]/2,p=(e-r)*100*_.value/n.value[t.value.offset];i.wrapElement[t.value.scroll]=p*i.wrapElement[t.value.scrollSize]/100},x=s=>{s.stopImmediatePropagation(),a=!0,document.addEventListener("mousemove",B),document.addEventListener("mouseup",y),b=document.onselectstart,document.onselectstart=()=>!1},B=s=>{if(!n.value||!m.value||a===!1)return;const e=o.value[t.value.axis];if(!e)return;const r=(n.value.getBoundingClientRect()[t.value.direction]-s[t.value.client])*-1,p=m.value[t.value.offset]-e,z=(r-p)*100*_.value/n.value[t.value.offset];i.wrapElement[t.value.scroll]=z*i.wrapElement[t.value.scrollSize]/100},y=()=>{a=!1,o.value[t.value.axis]=0,document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",y),H(),h&&(v.value=!1)},M=()=>{h=!1,v.value=!!c.size},A=()=>{h=!0,v.value=a};le(()=>{H(),document.removeEventListener("mouseup",y)});const H=()=>{document.onselectstart!==b&&(document.onselectstart=b)};return O(X(i,"scrollbarElement"),"mousemove",M),O(X(i,"scrollbarElement"),"mouseleave",A),(s,e)=>(k(),W(re,{name:f(l).b("fade"),persisted:""},{default:F(()=>[se(j("div",{ref_key:"instance",ref:n,class:T([f(l).e("bar"),f(l).is(f(t).key)]),onMousedown:L},[j("div",{ref_key:"thumb",ref:m,class:T(f(l).e("thumb")),style:D(f(S)),onMousedown:P},null,38)],34),[[oe,s.always||v.value]])]),_:1},8,["name"]))}});var I=K(_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const ze=$({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ee=C({__name:"bar",props:ze,setup(d,{expose:c}){const i=d,l=u(0),n=u(0);return c({handleScroll:o=>{if(o){const v=o.offsetHeight-g,a=o.offsetWidth-g;n.value=o.scrollTop*100/v*i.ratioY,l.value=o.scrollLeft*100/a*i.ratioX}}}),(o,v)=>(k(),Q(ie,null,[Y(I,{move:l.value,ratio:o.ratioX,size:o.width,always:o.always},null,8,["move","ratio","size","always"]),Y(I,{move:n.value,ratio:o.ratioY,size:o.height,vertical:"",always:o.always},null,8,["move","ratio","size","always"])],64))}});var ke=K(Ee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Te=$({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:be([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Pe={scroll:({scrollTop:d,scrollLeft:c})=>[d,c].every(E)},Be="ElScrollbar",He=C({name:Be}),Ne=C({...He,props:Te,emits:Pe,setup(d,{expose:c,emit:i}){const l=d,n=q("scrollbar");let m,o;const v=u(),a=u(),h=u(),b=u("0"),t=u("0"),S=u(),_=u(1),P=u(1),L=w(()=>{const e={};return l.height&&(e.height=V(l.height)),l.maxHeight&&(e.maxHeight=V(l.maxHeight)),[l.wrapStyle,e]}),x=w(()=>[l.wrapClass,n.e("wrap"),{[n.em("wrap","hidden-default")]:!l.native}]),B=w(()=>[n.e("view"),l.viewClass]),y=()=>{var e;a.value&&((e=S.value)==null||e.handleScroll(a.value),i("scroll",{scrollTop:a.value.scrollTop,scrollLeft:a.value.scrollLeft}))};function M(e,r){he(e)?a.value.scrollTo(e):E(e)&&E(r)&&a.value.scrollTo(e,r)}const A=e=>{!E(e)||(a.value.scrollTop=e)},H=e=>{!E(e)||(a.value.scrollLeft=e)},s=()=>{if(!a.value)return;const e=a.value.offsetHeight-g,r=a.value.offsetWidth-g,p=e**2/a.value.scrollHeight,z=r**2/a.value.scrollWidth,N=Math.max(p,l.minSize),R=Math.max(z,l.minSize);_.value=p/(e-p)/(N/(e-N)),P.value=z/(r-z)/(R/(r-R)),t.value=N+g<e?`${N}px`:"",b.value=R+g<r?`${R}px`:""};return G(()=>l.noresize,e=>{e?(m==null||m(),o==null||o()):({stop:m}=J(h,s),o=O("resize",s))},{immediate:!0}),G(()=>[l.maxHeight,l.height],()=>{l.native||U(()=>{var e;s(),a.value&&((e=S.value)==null||e.handleScroll(a.value))})}),ue(Z,ce({scrollbarElement:v,wrapElement:a})),me(()=>{l.native||U(()=>{s()})}),ve(()=>s()),c({wrapRef:a,update:s,scrollTo:M,setScrollTop:A,setScrollLeft:H,handleScroll:y}),(e,r)=>(k(),Q("div",{ref_key:"scrollbarRef",ref:v,class:T(f(n).b())},[j("div",{ref_key:"wrapRef",ref:a,class:T(f(x)),style:D(f(L)),onScroll:y},[(k(),W(de(e.tag),{ref_key:"resizeRef",ref:h,class:T(f(B)),style:D(e.viewStyle)},{default:F(()=>[fe(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?pe("v-if",!0):(k(),W(ke,{key:0,ref_key:"barRef",ref:S,height:t.value,width:b.value,always:e.always,"ratio-x":P.value,"ratio-y":_.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Re=K(Ne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const $e=ge(Re);export{Ye as BAR_MAP,$e as ElScrollbar,Ge as GAP,$e as default,Ue as renderThumbStyle,Z as scrollbarContextKey,Pe as scrollbarEmits,Te as scrollbarProps,we as thumbProps};
