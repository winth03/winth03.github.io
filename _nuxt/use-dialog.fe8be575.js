import{b as B,d as k}from"./runtime.a8d5aa72.js";import{ag as _,a2 as D,aY as G,aj as F,w,aZ as K,ad as h,f as q,S as J,K as M,j as Q,aA as O,p as v,aG as X,k as P,e as R,H as ee,x as oe,a9 as T}from"./entry.40f94ce2.js";import{P as x}from"./vnode.30b5e0bd.js";import{i as te}from"./icon.aaa9d058.js";import{U as A}from"./event.e54e7e4a.js";import{b as ne}from"./types.0ffe2429.js";import{u as le}from"./index.1eb5ee59.js";import{u as ae}from"./use-global-config.be3c3615.js";import{h as I,g as se,a as ue,r as ce,b as ie}from"./style.a7bf22e4.js";import{t as re}from"./error.6c36bb34.js";import{a as de}from"./scroll.123f6305.js";const fe=(e,o={})=>{_(e)||re("[useLockscreen]","You need to pass a ref param to this function");const u=o.ns||D("popup"),t=G(()=>u.bm("parent","hidden"));if(!F||I(document.body,t.value))return;let c=0,s=!1,n="0";const r=()=>{setTimeout(()=>{ce(document==null?void 0:document.body,t.value),s&&document&&(document.body.style.width=n)},200)};w(e,a=>{if(!a){r();return}s=!I(document.body,t.value),s&&(n=document.body.style.width),c=de(u.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,d=se(document.body,"overflowY");c>0&&(f||d==="scroll")&&s&&(document.body.style.width=`calc(100% - ${c}px)`),ue(document.body,t.value)}),K(()=>r())},me=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,u=!1;return{onClick:n=>{o&&u&&e(n),o=u=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{u=n.target===n.currentTarget}}},ye=B({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),ve={click:e=>e instanceof MouseEvent},pe="overlay";var Ce=q({name:"ElOverlay",props:ye,emits:ve,setup(e,{slots:o,emit:u}){const t=D(pe),c=a=>{u("click",a)},{onClick:s,onMousedown:n,onMouseup:r}=me(e.customMaskEvent?void 0:c);return()=>e.mask?J("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:n,onMouseup:r},[M(o,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):Q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(o,"default")])}});const Te=Ce,be=B({center:Boolean,alignCenter:Boolean,closeIcon:{type:te},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ie={close:()=>!0},De=B({...be,appendToBody:Boolean,beforeClose:{type:k(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Fe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[A]:e=>ne(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ae=(e,o)=>{const t=oe().emit,{nextZIndex:c}=le();let s="";const n=O(),r=O(),a=v(!1),f=v(!1),d=v(!1),p=v(e.zIndex||c());let m,y;const N=ae("namespace",X),z=P(()=>{const l={},i=`--${N.value}-dialog`;return e.fullscreen||(e.top&&(l[`${i}-margin-top`]=e.top),e.width&&(l[`${i}-width`]=ie(e.width))),l}),L=P(()=>e.alignCenter?{display:"flex"}:{});function H(){t("opened")}function V(){t("closed"),t(A,!1),e.destroyOnClose&&(d.value=!1)}function Y(){t("close")}function S(){y==null||y(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=T(()=>E(),e.openDelay):E()}function C(){m==null||m(),y==null||y(),e.closeDelay&&e.closeDelay>0?{stop:y}=T(()=>g(),e.closeDelay):g()}function b(){function l(i){i||(f.value=!0,a.value=!1)}e.beforeClose?e.beforeClose(l):C()}function $(){e.closeOnClickModal&&b()}function E(){!F||(a.value=!0)}function g(){a.value=!1}function j(){t("openAutoFocus")}function U(){t("closeAutoFocus")}function W(l){var i;((i=l.detail)==null?void 0:i.focusReason)==="pointer"&&l.preventDefault()}e.lockScroll&&fe(a);function Z(){e.closeOnPressEscape&&b()}return w(()=>e.modelValue,l=>{l?(f.value=!1,S(),d.value=!0,p.value=e.zIndex?p.value++:c(),R(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):a.value&&C()}),w(()=>e.fullscreen,l=>{!o.value||(l?(s=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=s)}),ee(()=>{e.modelValue&&(a.value=!0,d.value=!0,S())}),{afterEnter:H,afterLeave:V,beforeLeave:Y,handleClose:b,onModalClick:$,close:C,doClose:g,onOpenAutoFocus:j,onCloseAutoFocus:U,onCloseRequested:Z,onFocusoutPrevented:W,titleId:n,bodyId:r,closed:f,style:z,overlayDialogStyle:L,rendered:d,visible:a,zIndex:p}};export{Te as E,Ie as a,De as b,Fe as c,be as d,me as e,Ae as u};
