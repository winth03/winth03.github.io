import{i as Q,f as ue,b as le,ai as ie,h as V,e as se,S as me,aO as ce,o as f,j as z,x as W,u as n,k as M,q as _,v as K,w as Y,c as E,P as j,z as S,F as de}from"./entry.95cc8762.js";import{ElInput as pe}from"./index.08a4c301.js";import{ElIcon as q}from"./index.392905e6.js";import{ArrowDown as fe,Minus as be,ArrowUp as ve,Plus as Ne}from"./index.97da7d89.js";import{b as Ve}from"./runtime.5e0241e9.js";import{u as he}from"./index.34910866.js";import{i as c,c as I,a as P}from"./types.4bdaf307.js";import{C as X,I as A,U as h}from"./event.e54e7e4a.js";import{_ as Ie}from"./plugin-vue_export-helper.b0b5f2d9.js";import{u as ye}from"./index.5620220e.js";import{a as we}from"./use-form-item.e7f9ca0e.js";import{t as ge,d as H}from"./error.6c36bb34.js";import{u as _e,a as Ee}from"./use-form-common-props.4d6c21e0.js";import{v as J}from"./index.69f8d565.js";import{w as Se}from"./install.7765cf20.js";import"./index.245338dc.js";import"./browser.ea1aa81e.js";import"./icon.eb516799.js";import"./typescript.c44ade1c.js";import"./index.2a500cf4.js";import"./i18n.de31208d.js";import"./style.bd87547e.js";import"./size.007424cf.js";import"./constants.e2ce9b61.js";import"./get.070bcf83.js";import"./_baseGet.57648035.js";import"./isArray.3fa80ba1.js";import"./isObject.5a18b265.js";const Pe=Ve({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:he,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:o=>o===null||c(o)||["min","max"].includes(o),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:o=>o>=0&&o===Number.parseInt(`${o}`,10)},validateEvent:{type:Boolean,default:!0}}),Ae={[X]:(o,F)=>F!==o,blur:o=>o instanceof FocusEvent,focus:o=>o instanceof FocusEvent,[A]:o=>c(o)||I(o),[h]:o=>c(o)||I(o)},Fe=["aria-label","onKeydown"],ke=["aria-label","onKeydown"],xe=Q({name:"ElInputNumber"}),Ce=Q({...xe,props:Pe,emits:Ae,setup(o,{expose:F,emit:m}){const a=o,{t:O}=ye(),d=ue("input-number"),v=le(),i=ie({currentValue:a.modelValue,userInput:null}),{formItem:b}=we(),U=V(()=>c(a.modelValue)&&a.modelValue<=a.min),$=V(()=>c(a.modelValue)&&a.modelValue>=a.max),Z=V(()=>{const e=L(a.step);return P(a.precision)?Math.max(L(a.modelValue),e):(e>a.precision,a.precision)}),k=V(()=>a.controls&&a.controlsPosition==="right"),G=_e(),N=Ee(),x=V(()=>{if(i.userInput!==null)return i.userInput;let e=i.currentValue;if(I(e))return"";if(c(e)){if(Number.isNaN(e))return"";P(a.precision)||(e=e.toFixed(a.precision))}return e}),C=(e,t)=>{if(P(t)&&(t=Z.value),t===0)return Math.round(e);let r=String(e);const u=r.indexOf(".");if(u===-1||!r.replace(".","").split("")[u+t])return e;const w=r.length;return r.charAt(w-1)==="5"&&(r=`${r.slice(0,Math.max(0,w-1))}6`),Number.parseFloat(Number(r).toFixed(t))},L=e=>{if(I(e))return 0;const t=e.toString(),r=t.indexOf(".");let u=0;return r!==-1&&(u=t.length-r-1),u},R=(e,t=1)=>c(e)?C(e+a.step*t):i.currentValue,B=()=>{if(a.readonly||N.value||$.value)return;const e=Number(x.value)||0,t=R(e);y(t),m(A,i.currentValue)},D=()=>{if(a.readonly||N.value||U.value)return;const e=Number(x.value)||0,t=R(e,-1);y(t),m(A,i.currentValue)},T=(e,t)=>{const{max:r,min:u,step:l,precision:p,stepStrictly:w,valueOnClear:g}=a;r<u&&ge("InputNumber","min should not be greater than max.");let s=Number(e);if(I(e)||Number.isNaN(s))return null;if(e===""){if(g===null)return null;s=de(g)?{min:u,max:r}[g]:g}return w&&(s=C(Math.round(s/l)*l,p)),P(p)||(s=C(s,p)),(s>r||s<u)&&(s=s>r?r:u,t&&m(h,s)),s},y=(e,t=!0)=>{var r;const u=i.currentValue,l=T(e);if(!t){m(h,l);return}u!==l&&(i.userInput=null,m(h,l),m(X,l,u),a.validateEvent&&((r=b==null?void 0:b.validate)==null||r.call(b,"change").catch(p=>H())),i.currentValue=l)},ee=e=>{i.userInput=e;const t=e===""?null:Number(e);m(A,t),y(t,!1)},te=e=>{const t=e!==""?Number(e):"";(c(t)&&!Number.isNaN(t)||e==="")&&y(t),i.userInput=null},ne=()=>{var e,t;(t=(e=v.value)==null?void 0:e.focus)==null||t.call(e)},re=()=>{var e,t;(t=(e=v.value)==null?void 0:e.blur)==null||t.call(e)},ae=e=>{m("focus",e)},oe=e=>{var t;m("blur",e),a.validateEvent&&((t=b==null?void 0:b.validate)==null||t.call(b,"blur").catch(r=>H()))};return se(()=>a.modelValue,e=>{const t=T(i.userInput),r=T(e,!0);!c(t)&&(!t||t!==r)&&(i.currentValue=r,i.userInput=null)},{immediate:!0}),me(()=>{var e;const{min:t,max:r,modelValue:u}=a,l=(e=v.value)==null?void 0:e.input;if(l.setAttribute("role","spinbutton"),Number.isFinite(r)?l.setAttribute("aria-valuemax",String(r)):l.removeAttribute("aria-valuemax"),Number.isFinite(t)?l.setAttribute("aria-valuemin",String(t)):l.removeAttribute("aria-valuemin"),l.setAttribute("aria-valuenow",String(i.currentValue)),l.setAttribute("aria-disabled",String(N.value)),!c(u)&&u!=null){let p=Number(u);Number.isNaN(p)&&(p=null),m(h,p)}}),ce(()=>{var e;const t=(e=v.value)==null?void 0:e.input;t==null||t.setAttribute("aria-valuenow",`${i.currentValue}`)}),F({focus:ne,blur:re}),(e,t)=>(f(),z("div",{class:M([n(d).b(),n(d).m(n(G)),n(d).is("disabled",n(N)),n(d).is("without-controls",!e.controls),n(d).is("controls-right",n(k))]),onDragstart:t[1]||(t[1]=S(()=>{},["prevent"]))},[e.controls?W((f(),z("span",{key:0,role:"button","aria-label":n(O)("el.inputNumber.decrease"),class:M([n(d).e("decrease"),n(d).is("disabled",n(U))]),onKeydown:_(D,["enter"])},[K(n(q),null,{default:Y(()=>[n(k)?(f(),E(n(fe),{key:0})):(f(),E(n(be),{key:1}))]),_:1})],42,Fe)),[[n(J),D]]):j("v-if",!0),e.controls?W((f(),z("span",{key:1,role:"button","aria-label":n(O)("el.inputNumber.increase"),class:M([n(d).e("increase"),n(d).is("disabled",n($))]),onKeydown:_(B,["enter"])},[K(n(q),null,{default:Y(()=>[n(k)?(f(),E(n(ve),{key:0})):(f(),E(n(Ne),{key:1}))]),_:1})],42,ke)),[[n(J),B]]):j("v-if",!0),K(n(pe),{id:e.id,ref_key:"input",ref:v,type:"number",step:e.step,"model-value":n(x),placeholder:e.placeholder,readonly:e.readonly,disabled:n(N),size:n(G),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:t[0]||(t[0]=S(()=>{},["prevent"])),onKeydown:[_(S(B,["prevent"]),["up"]),_(S(D,["prevent"]),["down"])],onBlur:oe,onFocus:ae,onInput:ee,onChange:te},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var Be=Ie(Ce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const it=Se(Be);export{it as ElInputNumber,it as default,Ae as inputNumberEmits,Pe as inputNumberProps};
