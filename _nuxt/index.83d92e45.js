import{f as q,a2 as ue,p as le,M as ie,k as V,w as se,H as me,aL as ce,o as f,D as T,Z as H,u as n,a4 as K,aQ as _,S as z,L as R,c as E,Y as W,aK as S,a8 as pe}from"./entry.40f94ce2.js";import{ElInput as de}from"./index.ecd8b7b6.js";import{ElIcon as Q}from"./index.52232a07.js";import{ArrowDown as fe,Minus as be,ArrowUp as ve,Plus as Ne}from"./index.e0b44930.js";import{b as Ve}from"./runtime.a8d5aa72.js";import{a as he}from"./index.f72caa6f.js";import{c,i as I,a as P}from"./types.0ffe2429.js";import{C as J,I as A,U as h}from"./event.e54e7e4a.js";import{_ as Ie}from"./plugin-vue_export-helper.b0b5f2d9.js";import{u as ye}from"./index.b1f4efad.js";import{u as we}from"./use-form-item.eeb4683c.js";import{t as ge,d as Z}from"./error.6c36bb34.js";import{u as _e,a as Ee}from"./use-form-common-props.c0d2009e.js";import{v as j}from"./index.4d3ac939.js";import{w as Se}from"./install.db378abc.js";import"./index.5dbd068b.js";import"./browser.d39506a1.js";import"./icon.aaa9d058.js";import"./typescript.c44ade1c.js";import"./index.43dcf301.js";import"./i18n.de31208d.js";import"./style.a7bf22e4.js";import"./size.007424cf.js";import"./constants.e2ce9b61.js";import"./get.070bcf83.js";import"./_baseGet.57648035.js";import"./isArray.3fa80ba1.js";import"./isObject.5a18b265.js";const Pe=Ve({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:he,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:o=>o===null||c(o)||["min","max"].includes(o),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:o=>o>=0&&o===Number.parseInt(`${o}`,10)},validateEvent:{type:Boolean,default:!0}}),Ae={[J]:(o,k)=>k!==o,blur:o=>o instanceof FocusEvent,focus:o=>o instanceof FocusEvent,[A]:o=>c(o)||I(o),[h]:o=>c(o)||I(o)},ke=["aria-label","onKeydown"],Fe=["aria-label","onKeydown"],Ce=q({name:"ElInputNumber"}),xe=q({...Ce,props:Pe,emits:Ae,setup(o,{expose:k,emit:m}){const a=o,{t:O}=ye(),p=ue("input-number"),v=le(),i=ie({currentValue:a.modelValue,userInput:null}),{formItem:b}=we(),U=V(()=>c(a.modelValue)&&a.modelValue<=a.min),L=V(()=>c(a.modelValue)&&a.modelValue>=a.max),X=V(()=>{const e=$(a.step);return P(a.precision)?Math.max($(a.modelValue),e):(e>a.precision,a.precision)}),F=V(()=>a.controls&&a.controlsPosition==="right"),Y=_e(),N=Ee(),C=V(()=>{if(i.userInput!==null)return i.userInput;let e=i.currentValue;if(I(e))return"";if(c(e)){if(Number.isNaN(e))return"";P(a.precision)||(e=e.toFixed(a.precision))}return e}),x=(e,t)=>{if(P(t)&&(t=X.value),t===0)return Math.round(e);let r=String(e);const u=r.indexOf(".");if(u===-1||!r.replace(".","").split("")[u+t])return e;const w=r.length;return r.charAt(w-1)==="5"&&(r=`${r.slice(0,Math.max(0,w-1))}6`),Number.parseFloat(Number(r).toFixed(t))},$=e=>{if(I(e))return 0;const t=e.toString(),r=t.indexOf(".");let u=0;return r!==-1&&(u=t.length-r-1),u},G=(e,t=1)=>c(e)?x(e+a.step*t):i.currentValue,B=()=>{if(a.readonly||N.value||L.value)return;const e=Number(C.value)||0,t=G(e);y(t),m(A,i.currentValue)},D=()=>{if(a.readonly||N.value||U.value)return;const e=Number(C.value)||0,t=G(e,-1);y(t),m(A,i.currentValue)},M=(e,t)=>{const{max:r,min:u,step:l,precision:d,stepStrictly:w,valueOnClear:g}=a;r<u&&ge("InputNumber","min should not be greater than max.");let s=Number(e);if(I(e)||Number.isNaN(s))return null;if(e===""){if(g===null)return null;s=pe(g)?{min:u,max:r}[g]:g}return w&&(s=x(Math.round(s/l)*l,d)),P(d)||(s=x(s,d)),(s>r||s<u)&&(s=s>r?r:u,t&&m(h,s)),s},y=(e,t=!0)=>{var r;const u=i.currentValue,l=M(e);if(!t){m(h,l);return}u!==l&&(i.userInput=null,m(h,l),m(J,l,u),a.validateEvent&&((r=b==null?void 0:b.validate)==null||r.call(b,"change").catch(d=>Z())),i.currentValue=l)},ee=e=>{i.userInput=e;const t=e===""?null:Number(e);m(A,t),y(t,!1)},te=e=>{const t=e!==""?Number(e):"";(c(t)&&!Number.isNaN(t)||e==="")&&y(t),i.userInput=null},ne=()=>{var e,t;(t=(e=v.value)==null?void 0:e.focus)==null||t.call(e)},re=()=>{var e,t;(t=(e=v.value)==null?void 0:e.blur)==null||t.call(e)},ae=e=>{m("focus",e)},oe=e=>{var t;m("blur",e),a.validateEvent&&((t=b==null?void 0:b.validate)==null||t.call(b,"blur").catch(r=>Z()))};return se(()=>a.modelValue,e=>{const t=M(i.userInput),r=M(e,!0);!c(t)&&(!t||t!==r)&&(i.currentValue=r,i.userInput=null)},{immediate:!0}),me(()=>{var e;const{min:t,max:r,modelValue:u}=a,l=(e=v.value)==null?void 0:e.input;if(l.setAttribute("role","spinbutton"),Number.isFinite(r)?l.setAttribute("aria-valuemax",String(r)):l.removeAttribute("aria-valuemax"),Number.isFinite(t)?l.setAttribute("aria-valuemin",String(t)):l.removeAttribute("aria-valuemin"),l.setAttribute("aria-valuenow",String(i.currentValue)),l.setAttribute("aria-disabled",String(N.value)),!c(u)&&u!=null){let d=Number(u);Number.isNaN(d)&&(d=null),m(h,d)}}),ce(()=>{var e;const t=(e=v.value)==null?void 0:e.input;t==null||t.setAttribute("aria-valuenow",`${i.currentValue}`)}),k({focus:ne,blur:re}),(e,t)=>(f(),T("div",{class:K([n(p).b(),n(p).m(n(Y)),n(p).is("disabled",n(N)),n(p).is("without-controls",!e.controls),n(p).is("controls-right",n(F))]),onDragstart:t[1]||(t[1]=S(()=>{},["prevent"]))},[e.controls?H((f(),T("span",{key:0,role:"button","aria-label":n(O)("el.inputNumber.decrease"),class:K([n(p).e("decrease"),n(p).is("disabled",n(U))]),onKeydown:_(D,["enter"])},[z(n(Q),null,{default:R(()=>[n(F)?(f(),E(n(fe),{key:0})):(f(),E(n(be),{key:1}))]),_:1})],42,ke)),[[n(j),D]]):W("v-if",!0),e.controls?H((f(),T("span",{key:1,role:"button","aria-label":n(O)("el.inputNumber.increase"),class:K([n(p).e("increase"),n(p).is("disabled",n(L))]),onKeydown:_(B,["enter"])},[z(n(Q),null,{default:R(()=>[n(F)?(f(),E(n(ve),{key:0})):(f(),E(n(Ne),{key:1}))]),_:1})],42,Fe)),[[n(j),B]]):W("v-if",!0),z(n(de),{id:e.id,ref_key:"input",ref:v,type:"number",step:e.step,"model-value":n(C),placeholder:e.placeholder,readonly:e.readonly,disabled:n(N),size:n(Y),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:t[0]||(t[0]=S(()=>{},["prevent"])),onKeydown:[_(S(B,["prevent"]),["up"]),_(S(D,["prevent"]),["down"])],onBlur:oe,onFocus:ae,onInput:ee,onChange:te},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var Be=Ie(xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const it=Se(Be);export{it as ElInputNumber,it as default,Ae as inputNumberEmits,Pe as inputNumberProps};
