import{ElButton as ce}from"./index.f0aadd2f.js";import{E as Te}from"./index.e4366f66.js";import{ElScrollbar as $e}from"./index.2c8caac7.js";import{ElIcon as pe}from"./index.45f48a28.js";import{ArrowDown as Fe}from"./index.b2143f7d.js";import{c as Re,E as ke,d as Se,a as me,C as Oe,b as Ne,e as Pe,f as De,g as Ke,F as Le,L as Be}from"./dropdown.bf7761d7.js";import{g as Rn,C as kn,E as Sn,e as On,h as Nn,F as Pn,L as Dn,a as Kn,f as Ln,d as Bn}from"./dropdown.bf7761d7.js";import{_ as M}from"./plugin-vue_export-helper.b0b5f2d9.js";import{b as Ae}from"./index.066dc621.js";import{b as Me,d as Z}from"./runtime.781c1752.js";import{E as _}from"./aria.362daa0e.js";import{c as N,w as ae}from"./event.079378dc.js";import{i as G,b as T,l as C,h as $,p as W,aG as Ge,V as Y,u as O,e as fe,r as D,a5 as b,o as P,c as U,w as v,v as k,n as ze,g as Ye,U as ve,Z as Ue,f as ee,af as He,R as ge,D as Ve,j,aS as Je,A as V,k as q,P as X,m as We,O as je,z as x,L as Qe,Q as Ze}from"./entry.832a1cf2.js";import{O as qe}from"./index.b774ee77.js";import{u as Xe}from"./index.ee071e53.js";import{a as xe}from"./style.799baba7.js";import{u as eo}from"./use-form-common-props.ec5a7000.js";import{c as we}from"./refs.e038e231.js";import{F as oo}from"./focus-trap.dce34dba.js";import{w as no,a as be}from"./install.13f627c7.js";import"./index.cbc3748d.js";import"./use-global-config.2ea59d22.js";import"./index.bb99bec3.js";import"./types.8eace398.js";import"./index.86aa0141.js";import"./size.007424cf.js";import"./objects.1e9cc2c5.js";import"./get.070bcf83.js";import"./_baseGet.57648035.js";import"./isArray.3fa80ba1.js";import"./isObject.5a18b265.js";import"./_baseSet.39436bc7.js";import"./_defineProperty.f71786e5.js";import"./_isIndex.f5af1eca.js";import"./use-form-item.e7df070b.js";import"./constants.e2ce9b61.js";import"./icon.663f0749.js";import"./index.3e0aacb0.js";import"./util.c8753e63.js";import"./error.6c36bb34.js";const to=Me({style:{type:Z([String,Array,Object])},currentTabId:{type:Z(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Z(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ro,ElCollectionItem:lo,COLLECTION_INJECTION_KEY:oe,COLLECTION_ITEM_INJECTION_KEY:so}=Re("RovingFocusGroup"),ne=Symbol("elRovingFocusGroup"),Ie=Symbol("elRovingFocusGroupItem"),io={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},ao=(e,o)=>{if(o!=="rtl")return e;switch(e){case _.right:return _.left;case _.left:return _.right;default:return e}},uo=(e,o,a)=>{const t=ao(e.key,a);if(!(o==="vertical"&&[_.left,_.right].includes(t))&&!(o==="horizontal"&&[_.up,_.down].includes(t)))return io[t]},co=(e,o)=>e.map((a,t)=>e[(t+o)%e.length]),te=e=>{const{activeElement:o}=document;for(const a of e)if(a===o||(a.focus(),o!==document.activeElement))return},de="currentTabIdChange",ue="rovingFocusGroup.entryFocus",po={bubbles:!1,cancelable:!0},mo=G({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:to,emits:[de,"entryFocus"],setup(e,{emit:o}){var a;const t=T((a=e.currentTabId||e.defaultCurrentTabId)!=null?a:null),c=T(!1),u=T(!1),s=T(null),{getItems:l}=C(oe,void 0),p=$(()=>[{outline:"none"},e.style]),g=i=>{o(de,i)},w=()=>{c.value=!0},I=N(i=>{var m;(m=e.onMousedown)==null||m.call(e,i)},()=>{u.value=!0}),h=N(i=>{var m;(m=e.onFocus)==null||m.call(e,i)},i=>{const m=!O(u),{target:K,currentTarget:F}=i;if(K===F&&m&&!O(c)){const L=new Event(ue,po);if(F==null||F.dispatchEvent(L),!L.defaultPrevented){const f=l().filter(R=>R.focusable),S=f.find(R=>R.active),E=f.find(R=>R.id===O(t)),A=[S,E,...f].filter(Boolean).map(R=>R.ref);te(A)}}u.value=!1}),n=N(i=>{var m;(m=e.onBlur)==null||m.call(e,i)},()=>{c.value=!1}),d=(...i)=>{o("entryFocus",...i)};W(ne,{currentTabbedId:Ge(t),loop:Y(e,"loop"),tabIndex:$(()=>O(c)?-1:0),rovingFocusGroupRef:s,rovingFocusGroupRootStyle:p,orientation:Y(e,"orientation"),dir:Y(e,"dir"),onItemFocus:g,onItemShiftTab:w,onBlur:n,onFocus:h,onMousedown:I}),fe(()=>e.currentTabId,i=>{t.value=i!=null?i:null}),Ae(s,ue,d)}});function fo(e,o,a,t,c,u){return D(e.$slots,"default")}var vo=M(mo,[["render",fo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const go=G({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ro,ElRovingFocusGroupImpl:vo}});function wo(e,o,a,t,c,u){const s=b("el-roving-focus-group-impl"),l=b("el-focus-group-collection");return P(),U(l,null,{default:v(()=>[k(s,ze(Ye(e.$attrs)),{default:v(()=>[D(e.$slots,"default")]),_:3},16)]),_:3})}var bo=M(go,[["render",wo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const Io=G({components:{ElRovingFocusCollectionItem:lo},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:a,loop:t,onItemFocus:c,onItemShiftTab:u}=C(ne,void 0),{getItems:s}=C(oe,void 0),l=ve(),p=T(null),g=N(n=>{o("mousedown",n)},n=>{e.focusable?c(O(l)):n.preventDefault()}),w=N(n=>{o("focus",n)},()=>{c(O(l))}),I=N(n=>{o("keydown",n)},n=>{const{key:d,shiftKey:i,target:m,currentTarget:K}=n;if(d===_.tab&&i){u();return}if(m!==K)return;const F=uo(n);if(F){n.preventDefault();let f=s().filter(S=>S.focusable).map(S=>S.ref);switch(F){case"last":{f.reverse();break}case"prev":case"next":{F==="prev"&&f.reverse();const S=f.indexOf(K);f=t.value?co(f,S+1):f.slice(S+1);break}}Ue(()=>{te(f)})}}),h=$(()=>a.value===O(l));return W(Ie,{rovingFocusGroupItemRef:p,tabIndex:$(()=>O(h)?0:-1),handleMousedown:g,handleFocus:w,handleKeydown:I}),{id:l,handleKeydown:I,handleFocus:w,handleMousedown:g}}});function Eo(e,o,a,t,c,u){const s=b("el-roving-focus-collection-item");return P(),U(s,{id:e.id,focusable:e.focusable,active:e.active},{default:v(()=>[D(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var _o=M(Io,[["render",Eo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const Q=Symbol("elDropdown"),{ButtonGroup:ho}=ce,Co=G({name:"ElDropdown",components:{ElButton:ce,ElButtonGroup:ho,ElScrollbar:$e,ElDropdownCollection:ke,ElTooltip:Te,ElRovingFocusGroup:bo,ElOnlyChild:qe,ElIcon:pe,ArrowDown:Fe},props:Se,emits:["visible-change","click","command"],setup(e,{emit:o}){const a=ge(),t=ee("dropdown"),{t:c}=Xe(),u=T(),s=T(),l=T(null),p=T(null),g=T(null),w=T(null),I=T(!1),h=[_.enter,_.space,_.down],n=$(()=>({maxHeight:xe(e.maxHeight)})),d=$(()=>[t.m(f.value)]),i=ve().value,m=$(()=>e.id||i);fe([u,Y(e,"trigger")],([r,y],[z])=>{var le,se,ie;const ye=Ve(y)?y:[y];(le=z==null?void 0:z.$el)!=null&&le.removeEventListener&&z.$el.removeEventListener("pointerenter",E),(se=r==null?void 0:r.$el)!=null&&se.removeEventListener&&r.$el.removeEventListener("pointerenter",E),((ie=r==null?void 0:r.$el)==null?void 0:ie.addEventListener)&&ye.includes("hover")&&r.$el.addEventListener("pointerenter",E)},{immediate:!0}),He(()=>{var r,y;(y=(r=u.value)==null?void 0:r.$el)!=null&&y.removeEventListener&&u.value.$el.removeEventListener("pointerenter",E)});function K(){F()}function F(){var r;(r=l.value)==null||r.onClose()}function L(){var r;(r=l.value)==null||r.onOpen()}const f=eo();function S(...r){o("command",...r)}function E(){var r,y;(y=(r=u.value)==null?void 0:r.$el)==null||y.focus()}function B(){}function A(){const r=O(p);r==null||r.focus(),w.value=null}function R(r){w.value=r}function re(r){I.value||(r.preventDefault(),r.stopImmediatePropagation())}function J(){o("visible-change",!0)}function H(r){(r==null?void 0:r.type)==="keydown"&&p.value.focus()}function Ce(){o("visible-change",!1)}return W(Q,{contentRef:p,role:$(()=>e.role),triggerId:m,isUsingKeyboard:I,onItemEnter:B,onItemLeave:A}),W("elDropdown",{instance:a,dropdownSize:f,handleClick:K,commandHandler:S,trigger:Y(e,"trigger"),hideOnClick:Y(e,"hideOnClick")}),{t:c,ns:t,scrollbar:g,wrapStyle:n,dropdownTriggerKls:d,dropdownSize:f,triggerId:m,triggerKeys:h,currentTabId:w,handleCurrentTabIdChange:R,handlerMainButtonClick:r=>{o("click",r)},handleEntryFocus:re,handleClose:F,handleOpen:L,handleBeforeShowTooltip:J,handleShowTooltip:H,handleBeforeHideTooltip:Ce,onFocusAfterTrapped:r=>{var y,z;r.preventDefault(),(z=(y=p.value)==null?void 0:y.focus)==null||z.call(y,{preventScroll:!0})},popperRef:l,contentRef:p,triggeringElementRef:u,referenceElementRef:s}}});function yo(e,o,a,t,c,u){var s;const l=b("el-dropdown-collection"),p=b("el-roving-focus-group"),g=b("el-scrollbar"),w=b("el-only-child"),I=b("el-tooltip"),h=b("el-button"),n=b("arrow-down"),d=b("el-icon"),i=b("el-button-group");return P(),j("div",{class:q([e.ns.b(),e.ns.is("disabled",e.disabled)])},[k(I,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(s=e.referenceElementRef)==null?void 0:s.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},Je({content:v(()=>[k(g,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:v(()=>[k(p,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:v(()=>[k(l,null,{default:v(()=>[D(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:v(()=>[k(w,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:v(()=>[D(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(P(),U(i,{key:0},{default:v(()=>[k(h,V({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:v(()=>[D(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),k(h,V({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:v(()=>[k(d,{class:q(e.ns.e("icon"))},{default:v(()=>[k(n)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):X("v-if",!0)],2)}var To=M(Co,[["render",yo],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const $o=G({name:"DropdownItemImpl",components:{ElIcon:pe},props:me,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const a=ee("dropdown"),{role:t}=C(Q,void 0),{collectionItemRef:c}=C(Oe,void 0),{collectionItemRef:u}=C(so,void 0),{rovingFocusGroupItemRef:s,tabIndex:l,handleFocus:p,handleKeydown:g,handleMousedown:w}=C(Ie,void 0),I=we(c,u,s),h=$(()=>t.value==="menu"?"menuitem":t.value==="navigation"?"link":"button"),n=N(d=>{const{code:i}=d;if(i===_.enter||i===_.space)return d.preventDefault(),d.stopImmediatePropagation(),o("clickimpl",d),!0},g);return{ns:a,itemRef:I,dataset:{[Ne]:""},role:h,tabIndex:l,handleFocus:p,handleKeydown:n,handleMousedown:w}}}),Fo=["aria-disabled","tabindex","role"];function Ro(e,o,a,t,c,u){const s=b("el-icon");return P(),j(Qe,null,[e.divided?(P(),j("li",V({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):X("v-if",!0),We("li",V({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=l=>e.$emit("clickimpl",l)),onFocus:o[1]||(o[1]=(...l)=>e.handleFocus&&e.handleFocus(...l)),onKeydown:o[2]||(o[2]=x((...l)=>e.handleKeydown&&e.handleKeydown(...l),["self"])),onMousedown:o[3]||(o[3]=(...l)=>e.handleMousedown&&e.handleMousedown(...l)),onPointermove:o[4]||(o[4]=l=>e.$emit("pointermove",l)),onPointerleave:o[5]||(o[5]=l=>e.$emit("pointerleave",l))}),[e.icon?(P(),U(s,{key:0},{default:v(()=>[(P(),U(je(e.icon)))]),_:1})):X("v-if",!0),D(e.$slots,"default")],16,Fo)],64)}var ko=M($o,[["render",Ro],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const Ee=()=>{const e=C("elDropdown",{}),o=$(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},So=G({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Pe,ElRovingFocusItem:_o,ElDropdownItemImpl:ko},inheritAttrs:!1,props:me,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:a}){const{elDropdown:t}=Ee(),c=ge(),u=T(null),s=$(()=>{var n,d;return(d=(n=O(u))==null?void 0:n.textContent)!=null?d:""}),{onItemEnter:l,onItemLeave:p}=C(Q,void 0),g=N(n=>(o("pointermove",n),n.defaultPrevented),ae(n=>{if(e.disabled){p(n);return}const d=n.currentTarget;d===document.activeElement||d.contains(document.activeElement)||(l(n),n.defaultPrevented||d==null||d.focus())})),w=N(n=>(o("pointerleave",n),n.defaultPrevented),ae(n=>{p(n)})),I=N(n=>{if(!e.disabled)return o("click",n),n.type!=="keydown"&&n.defaultPrevented},n=>{var d,i,m;if(e.disabled){n.stopImmediatePropagation();return}(d=t==null?void 0:t.hideOnClick)!=null&&d.value&&((i=t.handleClick)==null||i.call(t)),(m=t.commandHandler)==null||m.call(t,e.command,c,n)}),h=$(()=>({...e,...a}));return{handleClick:I,handlePointerMove:g,handlePointerLeave:w,textContent:s,propsAndAttrs:h}}});function Oo(e,o,a,t,c,u){var s;const l=b("el-dropdown-item-impl"),p=b("el-roving-focus-item"),g=b("el-dropdown-collection-item");return P(),U(g,{disabled:e.disabled,"text-value":(s=e.textValue)!=null?s:e.textContent},{default:v(()=>[k(p,{focusable:!e.disabled},{default:v(()=>[k(l,V(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:v(()=>[D(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var _e=M(So,[["render",Oo],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const No=G({name:"ElDropdownMenu",props:De,setup(e){const o=ee("dropdown"),{_elDropdownSize:a}=Ee(),t=a.value,{focusTrapRef:c,onKeydown:u}=C(oo,void 0),{contentRef:s,role:l,triggerId:p}=C(Q,void 0),{collectionRef:g,getItems:w}=C(Ke,void 0),{rovingFocusGroupRef:I,rovingFocusGroupRootStyle:h,tabIndex:n,onBlur:d,onFocus:i,onMousedown:m}=C(ne,void 0),{collectionRef:K}=C(oe,void 0),F=$(()=>[o.b("menu"),o.bm("menu",t==null?void 0:t.value)]),L=we(s,g,c,I,K),f=N(E=>{var B;(B=e.onKeydown)==null||B.call(e,E)},E=>{const{currentTarget:B,code:A,target:R}=E;if(B.contains(R),_.tab===A&&E.stopImmediatePropagation(),E.preventDefault(),R!==O(s)||!Le.includes(A))return;const J=w().filter(H=>!H.disabled).map(H=>H.ref);Be.includes(A)&&J.reverse(),te(J)});return{size:t,rovingFocusGroupRootStyle:h,tabIndex:n,dropdownKls:F,role:l,triggerId:p,dropdownListWrapperRef:L,handleKeydown:E=>{f(E),u(E)},onBlur:d,onFocus:i,onMousedown:m}}}),Po=["role","aria-labelledby"];function Do(e,o,a,t,c,u){return P(),j("ul",{ref:e.dropdownListWrapperRef,class:q(e.dropdownKls),style:Ze(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...s)=>e.onBlur&&e.onBlur(...s)),onFocus:o[1]||(o[1]=(...s)=>e.onFocus&&e.onFocus(...s)),onKeydown:o[2]||(o[2]=x((...s)=>e.handleKeydown&&e.handleKeydown(...s),["self"])),onMousedown:o[3]||(o[3]=x((...s)=>e.onMousedown&&e.onMousedown(...s),["self"]))},[D(e.$slots,"default")],46,Po)}var he=M(No,[["render",Do],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const Cn=no(To,{DropdownItem:_e,DropdownMenu:he}),yn=be(_e),Tn=be(he);export{Rn as DROPDOWN_COLLECTION_INJECTION_KEY,kn as DROPDOWN_COLLECTION_ITEM_INJECTION_KEY,Q as DROPDOWN_INJECTION_KEY,Sn as ElCollection,On as ElCollectionItem,Cn as ElDropdown,yn as ElDropdownItem,Tn as ElDropdownMenu,Nn as FIRST_KEYS,Pn as FIRST_LAST_KEYS,Dn as LAST_KEYS,Cn as default,Kn as dropdownItemProps,Ln as dropdownMenuProps,Bn as dropdownProps};
