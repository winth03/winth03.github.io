import{m as X}from"./_baseGet.57648035.js";import{h as d,R as J,i as Q,f as B,b as F,ah as ee,u as y,e as te,ae as re,a1 as P,z as ne}from"./entry.b33cb278.js";import{a as m,b as N,d as g}from"./runtime.ca6a5e5a.js";import{m as ae}from"./typescript.c44ade1c.js";import{B as oe}from"./util.c8753e63.js";import{c as se,r as le}from"./raf.77fcd12d.js";var G=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function ie(e,t){return!!(e===t||G(e)&&G(t))}function ce(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!ie(e[n],t[n]))return!1;return!0}function ue(e,t){t===void 0&&(t=ce);var n=null;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;var c=e.apply(this,a);return n={lastResult:c,lastArgs:a,lastThis:this},c}return i.clear=function(){n=null},i}const _e=()=>{const t=J().proxy.$props;return d(()=>{const n=(i,a,o)=>({});return t.perfMode?X(n):ue(n)})},we=50,ze="itemRendered",Ce="scroll",de="forward",me="backward",Ie="auto",Oe="smart",xe="start",De="center",Be="end",E="horizontal",k="vertical",fe="ltr",H="rtl",ve="negative",he="positive-ascending",ge="positive-descending",pe={[E]:"left",[k]:"top"},Se=20,A=m({type:g([Number,Function]),required:!0}),M=m({type:Number}),_=m({type:Number,default:2}),be=m({type:String,values:["ltr","rtl"],default:"ltr"}),w=m({type:Number,default:0}),T=m({type:Number,required:!0}),$=m({type:String,values:["horizontal","vertical"],default:k}),q=N({className:{type:String,default:""},containerElement:{type:g([String,Object]),default:"div"},data:{type:g(Array),default:()=>ae([])},direction:be,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:g([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Fe=N({cache:_,estimatedItemSize:M,layout:$,initScrollOffset:w,total:T,itemSize:A,...q}),z={type:Number,default:6},V={type:Number,default:0},j={type:Number,default:2},Pe=N({columnCache:_,columnWidth:A,estimatedColumnWidth:M,estimatedRowHeight:M,initScrollLeft:w,initScrollTop:w,itemKey:{type:g(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:_,rowHeight:A,totalColumn:T,totalRow:T,hScrollbarSize:z,vScrollbarSize:z,scrollbarStartGap:V,scrollbarEndGap:j,role:String,...q}),ye=N({alwaysOn:Boolean,class:String,layout:$,total:T,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:z,startGap:V,endGap:j,visible:Boolean}),Ge=(e,t)=>e<t?de:me,ke=e=>e===fe||e===H||e===E,He=e=>e===H;let v=null;function $e(e=!1){if(v===null||e){const t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const i=document.createElement("div"),a=i.style;return a.width="100px",a.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?v=ge:(t.scrollLeft=1,t.scrollLeft===0?v=ve:v=he),document.body.removeChild(t),v}return v}function Ee({move:e,size:t,bar:n},i){const a={},o=`translate${n.axis}(${e}px)`;return a[n.size]=t,a.transform=o,a.msTransform=o,a.webkitTransform=o,i==="horizontal"?a.height="100%":a.width="100%",a}const qe=Q({name:"ElVirtualScrollBar",props:ye,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const n=d(()=>e.startGap+e.endGap),i=B("virtual-scrollbar"),a=B("scrollbar"),o=F(),c=F();let C=null,R=null;const l=ee({isDragging:!1,traveled:0}),s=d(()=>oe[e.layout]),I=d(()=>e.clientSize-y(n)),K=d(()=>({position:"absolute",width:`${E===e.layout?I.value:e.scrollbarSize}px`,height:`${E===e.layout?e.scrollbarSize:I.value}px`,[pe[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),L=d(()=>{const r=e.ratio,u=e.clientSize;if(r>=100)return Number.POSITIVE_INFINITY;if(r>=50)return r*u/100;const f=u/3;return Math.floor(Math.min(Math.max(r*u,Se),f))}),U=d(()=>{if(!Number.isFinite(L.value))return{display:"none"};const r=`${L.value}px`;return Ee({bar:s.value,size:r,move:l.traveled},e.layout)}),h=d(()=>Math.floor(e.clientSize-L.value-y(n))),W=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",p);const r=y(c);!r||(R=document.onselectstart,document.onselectstart=()=>!1,r.addEventListener("touchmove",S),r.addEventListener("touchend",p))},O=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",p),document.onselectstart=R,R=null;const r=y(c);!r||(r.removeEventListener("touchmove",S),r.removeEventListener("touchend",p))},x=r=>{r.stopImmediatePropagation(),!(r.ctrlKey||[1,2].includes(r.button))&&(l.isDragging=!0,l[s.value.axis]=r.currentTarget[s.value.offset]-(r[s.value.client]-r.currentTarget.getBoundingClientRect()[s.value.direction]),t("start-move"),W())},p=()=>{l.isDragging=!1,l[s.value.axis]=0,t("stop-move"),O()},S=r=>{const{isDragging:u}=l;if(!u||!c.value||!o.value)return;const f=l[s.value.axis];if(!f)return;se(C);const b=(o.value.getBoundingClientRect()[s.value.direction]-r[s.value.client])*-1,Y=c.value[s.value.offset]-f,D=b-Y;C=le(()=>{l.traveled=Math.max(e.startGap,Math.min(D,h.value)),t("scroll",D,h.value)})},Z=r=>{const u=Math.abs(r.target.getBoundingClientRect()[s.value.direction]-r[s.value.client]),f=c.value[s.value.offset]/2,b=u-f;l.traveled=Math.max(0,Math.min(b,h.value)),t("scroll",b,h.value)};return te(()=>e.scrollFrom,r=>{l.isDragging||(l.traveled=Math.ceil(r*h.value))}),re(()=>{O()}),()=>P("div",{role:"presentation",ref:o,class:[i.b(),e.class,(e.alwaysOn||l.isDragging)&&"always-on"],style:K.value,onMousedown:ne(Z,["stop","prevent"]),onTouchstartPrevent:x},P("div",{ref:c,class:a.e("thumb"),style:U.value,onMousedown:x},[]))}});export{Ie as A,me as B,De as C,we as D,Be as E,de as F,E as H,ze as I,H as R,Ce as S,k as V,$e as a,he as b,ve as c,qe as d,ge as e,xe as f,Ge as g,Oe as h,He as i,Fe as j,ye as k,ke as l,_e as u,Pe as v};
