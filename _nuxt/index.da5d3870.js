import{d as w}from"./dayjs.min.6a4959ec.js";import{c as Se}from"./customParseFormat.0b943e05.js";import{b as Te,u as _e,c as Q,d as De,e as Pe,t as Ae,T as Ce,f as we,C as Ee}from"./panel-time-pick.e58c1d65.js";import{C as ln,a as cn,D as un,f as pn,T as mn,t as dn,g as fn}from"./panel-time-pick.e58c1d65.js";import{b as Re,d as xe}from"./runtime.a8d5aa72.js";import{_ as Oe}from"./plugin-vue_export-helper.b0b5f2d9.js";import{u as Ve}from"./index.b1f4efad.js";import{f as Z,a2 as W,a5 as Ie,k as T,p as J,o as Me,D as Fe,I as k,a4 as b,u as r,Q as x,S as V,Y as Ue,as as B,a3 as Le,a6 as Ne}from"./entry.40f94ce2.js";import{E as Be}from"./aria.362daa0e.js";import{b as He}from"./_baseFlatten.02332558.js";import{b as Ke,i as ye}from"./isArrayLikeObject.c0a02f3a.js";import{s as X,S as $e,c as je}from"./isEqual.f785ded9.js";import{l as H}from"./_Uint8Array.4a2b558d.js";import{b as bn,d as gn,a as hn,e as kn,f as Sn,m as Tn,p as _n,r as Dn,v as Pn}from"./utils.5d6cb5fc.js";import"./_commonjsHelpers.eecb6206.js";import"./index.5dbd068b.js";import"./index.ecd8b7b6.js";import"./index.52232a07.js";import"./types.0ffe2429.js";import"./style.a7bf22e4.js";import"./install.db378abc.js";import"./index.e0b44930.js";import"./browser.d39506a1.js";import"./index.f72caa6f.js";import"./size.007424cf.js";import"./icon.aaa9d058.js";import"./typescript.c44ade1c.js";import"./event.e54e7e4a.js";import"./index.43dcf301.js";import"./use-form-item.eeb4683c.js";import"./constants.e2ce9b61.js";import"./use-form-common-props.c0d2009e.js";import"./error.6c36bb34.js";import"./i18n.de31208d.js";import"./index.0becfcd2.js";import"./index.cd7da693.js";import"./index.1eb5ee59.js";import"./focus-trap.efed23b5.js";import"./event.079378dc.js";import"./index.8ce59d4c.js";import"./util.c8753e63.js";import"./index.4d3ac939.js";import"./debounce.a43f57fe.js";import"./isObject.5a18b265.js";import"./get.070bcf83.js";import"./_baseGet.57648035.js";import"./isArray.3fa80ba1.js";import"./_arrayPush.6d7e61e4.js";import"./_overRest.e23153e9.js";import"./_defineProperty.f71786e5.js";import"./_isIndex.f5af1eca.js";function qe(){}function Ye(n,o,s,l){for(var c=n.length,u=s+(l?1:-1);l?u--:++u<c;)if(o(n[u],u,n))return u;return-1}function Ge(n){return n!==n}function ze(n,o,s){for(var l=s-1,c=n.length;++l<c;)if(n[l]===o)return l;return-1}function Qe(n,o,s){return o===o?ze(n,o,s):Ye(n,Ge,s)}function We(n,o){var s=n==null?0:n.length;return!!s&&Qe(n,o,0)>-1}function Ze(n,o,s){for(var l=-1,c=n==null?0:n.length;++l<c;)if(s(o,n[l]))return!0;return!1}var Je=1/0,Xe=H&&1/X(new H([,-0]))[1]==Je?function(n){return new H(n)}:qe;const et=Xe;var tt=200;function nt(n,o,s){var l=-1,c=We,u=n.length,a=!0,p=[],v=p;if(s)a=!1,c=Ze;else if(u>=tt){var _=o?null:et(n);if(_)return X(_);a=!1,c=je,v=new $e}else v=o?[]:p;e:for(;++l<u;){var g=n[l],S=o?o(g):g;if(g=s||g!==0?g:0,a&&S===S){for(var E=v.length;E--;)if(v[E]===S)continue e;o&&v.push(S),p.push(g)}else c(v,S,s)||(v!==p&&v.push(S),p.push(g))}return p}var at=Ke(function(n){return nt(He(n,1,ye,!0))});const K=at,ot=Re({...Te,parsedValue:{type:xe(Array)}}),st=["disabled"],rt=Z({__name:"panel-time-range",props:ot,emits:["pick","select-range","set-picker-option"],setup(n,{emit:o}){const s=n,l=(e,t)=>{const i=[];for(let m=e;m<=t;m++)i.push(m);return i},{t:c,lang:u}=Ve(),a=W("time"),p=W("picker"),v=Ie("EP_PICKER_BASE"),{arrowControl:_,disabledHours:g,disabledMinutes:S,disabledSeconds:E,defaultValue:I}=v.props,ee=T(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",_),A.value?"has-seconds":""]),te=T(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",_),A.value?"has-seconds":""]),D=T(()=>s.parsedValue[0]),P=T(()=>s.parsedValue[1]),ne=_e(s),ae=()=>{o("pick",ne.value,!1)},A=T(()=>s.format.includes("ss")),y=T(()=>s.format.includes("A")?"A":s.format.includes("a")?"a":""),oe=(e=!1)=>{o("pick",[D.value,P.value],e)},se=e=>{$(e.millisecond(0),P.value)},re=e=>{$(D.value,e.millisecond(0))},ie=e=>{const t=e.map(m=>w(m).locale(u.value)),i=q(t);return t[0].isSame(i[0])&&t[1].isSame(i[1])},$=(e,t)=>{o("pick",[e,t],!0)},le=T(()=>D.value>P.value),R=J([0,2]),ce=(e,t)=>{o("select-range",e,t,"min"),R.value=[e,t]},j=T(()=>A.value?11:8),ue=(e,t)=>{o("select-range",e,t,"max");const i=r(j);R.value=[e+i,t+i]},pe=e=>{const t=A.value?[0,3,6,11,14,17]:[0,3,8,11],i=["hours","minutes"].concat(A.value?["seconds"]:[]),d=(t.indexOf(R.value[0])+e+t.length)%t.length,f=t.length/2;d<f?L.start_emitSelectRange(i[d]):L.end_emitSelectRange(i[d-f])},me=e=>{const t=e.code,{left:i,right:m,up:d,down:f}=Be;if([i,m].includes(t)){pe(t===i?-1:1),e.preventDefault();return}if([d,f].includes(t)){const h=t===d?-1:1,C=R.value[0]<j.value?"start":"end";L[`${C}_scrollDown`](h),e.preventDefault();return}},M=(e,t)=>{const i=g?g(e):[],m=e==="start",f=(t||(m?P.value:D.value)).hour(),h=m?l(f+1,23):l(0,f-1);return K(i,h)},F=(e,t,i)=>{const m=S?S(e,t):[],d=t==="start",f=i||(d?P.value:D.value),h=f.hour();if(e!==h)return m;const C=f.minute(),N=d?l(C+1,59):l(0,C-1);return K(m,N)},U=(e,t,i,m)=>{const d=E?E(e,t,i):[],f=i==="start",h=m||(f?P.value:D.value),C=h.hour(),N=h.minute();if(e!==C||t!==N)return d;const z=h.second(),ke=f?l(z+1,59):l(0,z-1);return K(d,ke)},q=([e,t])=>[Y(e,"start",!0,t),Y(t,"end",!1,e)],{getAvailableHours:de,getAvailableMinutes:fe,getAvailableSeconds:ve}=Pe(M,F,U),{timePickerOptions:L,getAvailableTime:Y,onSetOption:G}=De({getAvailableHours:de,getAvailableMinutes:fe,getAvailableSeconds:ve}),be=e=>e?B(e)?e.map(t=>w(t,s.format).locale(u.value)):w(e,s.format).locale(u.value):null,ge=e=>e?B(e)?e.map(t=>t.format(s.format)):e.format(s.format):null,he=()=>{if(B(I))return I.map(t=>w(t).locale(u.value));const e=w(I).locale(u.value);return[e,e.add(60,"m")]};return o("set-picker-option",["formatToString",ge]),o("set-picker-option",["parseUserInput",be]),o("set-picker-option",["isValidValue",ie]),o("set-picker-option",["handleKeydownInput",me]),o("set-picker-option",["getDefaultValue",he]),o("set-picker-option",["getRangeAvailableTime",q]),(e,t)=>e.actualVisible?(Me(),Fe("div",{key:0,class:b([r(a).b("range-picker"),r(p).b("panel")])},[k("div",{class:b(r(a).be("range-picker","content"))},[k("div",{class:b(r(a).be("range-picker","cell"))},[k("div",{class:b(r(a).be("range-picker","header"))},x(r(c)("el.datepicker.startTime")),3),k("div",{class:b(r(ee))},[V(Q,{ref:"minSpinner",role:"start","show-seconds":r(A),"am-pm-mode":r(y),"arrow-control":r(_),"spinner-date":r(D),"disabled-hours":M,"disabled-minutes":F,"disabled-seconds":U,onChange:se,onSetOption:r(G),onSelectRange:ce},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),k("div",{class:b(r(a).be("range-picker","cell"))},[k("div",{class:b(r(a).be("range-picker","header"))},x(r(c)("el.datepicker.endTime")),3),k("div",{class:b(r(te))},[V(Q,{ref:"maxSpinner",role:"end","show-seconds":r(A),"am-pm-mode":r(y),"arrow-control":r(_),"spinner-date":r(P),"disabled-hours":M,"disabled-minutes":F,"disabled-seconds":U,onChange:re,onSetOption:r(G),onSelectRange:ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),k("div",{class:b(r(a).be("panel","footer"))},[k("button",{type:"button",class:b([r(a).be("panel","btn"),"cancel"]),onClick:t[0]||(t[0]=i=>ae())},x(r(c)("el.datepicker.cancel")),3),k("button",{type:"button",class:b([r(a).be("panel","btn"),"confirm"]),disabled:r(le),onClick:t[1]||(t[1]=i=>oe())},x(r(c)("el.datepicker.confirm")),11,st)],2)],2)):Ue("v-if",!0)}});var it=Oe(rt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);w.extend(Se);var lt=Z({name:"ElTimePicker",install:null,props:{...Ae,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,o){const s=J(),[l,c]=n.isRange?["timerange",it]:["time",Ce],u=a=>o.emit("update:modelValue",a);return Le("ElPopperOptions",n.popperOptions),o.expose({focus:a=>{var p;(p=s.value)==null||p.handleFocusInput(a)},blur:a=>{var p;(p=s.value)==null||p.handleBlurInput(a)},handleOpen:()=>{var a;(a=s.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=s.value)==null||a.handleClose()}}),()=>{var a;const p=(a=n.format)!=null?a:we;return V(Ee,Ne(n,{ref:s,type:l,format:p,"onUpdate:modelValue":u}),{default:v=>V(c,v,null)})}}});const O=lt;O.install=n=>{n.component(O.name,O)};const on=O;export{ln as CommonPicker,cn as DEFAULT_FORMATS_DATE,un as DEFAULT_FORMATS_DATEPICKER,pn as DEFAULT_FORMATS_TIME,on as ElTimePicker,mn as TimePickPanel,bn as buildTimeList,gn as dateEquals,O as default,hn as extractDateFormat,kn as extractTimeFormat,Sn as formatter,Tn as makeList,_n as parseDate,Dn as rangeArr,dn as timePickerDefaultProps,fn as timeUnits,Pn as valueEquals};
