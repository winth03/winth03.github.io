import{ElButton as S}from"./index.0216533f.js";import{ElIcon as Q}from"./index.392905e6.js";import{Search as he,ArrowLeft as me,ArrowRight as pe}from"./index.97da7d89.js";import{b as ae,d as v}from"./runtime.5e0241e9.js";import{m as ke}from"./typescript.c44ade1c.js";import{D as R,h as p,aC as Ce,e as M,i as H,$ as re,f as le,ai as ne,a2 as ge,o as V,j as B,m as U,v as E,w as T,s as ye,t as $,u as e,aq as I,k as y,c as W,P as q,x as J,y as X,L as be,M as ve,r as G,b as Y,a1 as Z}from"./entry.95cc8762.js";import{C as oe,U as se}from"./event.e54e7e4a.js";import{c as Ee,f as P,a as x}from"./types.4bdaf307.js";import{ElCheckbox as ee,ElCheckboxGroup as Te}from"./index.1fbb2aba.js";import{ElInput as _e}from"./index.08a4c301.js";import{_ as ce}from"./plugin-vue_export-helper.b0b5f2d9.js";import{u as ie}from"./index.5620220e.js";import{a as Ve}from"./use-form-item.e7f9ca0e.js";import{d as Ae}from"./error.6c36bb34.js";import{w as De}from"./install.7765cf20.js";import"./index.924b5343.js";import"./use-global-config.eeb63615.js";import"./index.c553ba19.js";import"./index.34910866.js";import"./size.007424cf.js";import"./objects.1e9cc2c5.js";import"./get.070bcf83.js";import"./_baseGet.57648035.js";import"./isArray.3fa80ba1.js";import"./isObject.5a18b265.js";import"./_baseSet.39436bc7.js";import"./_defineProperty.f71786e5.js";import"./_isIndex.f5af1eca.js";import"./use-form-common-props.4d6c21e0.js";import"./constants.e2ce9b61.js";import"./icon.eb516799.js";import"./index.3e0aacb0.js";import"./style.bd87547e.js";import"./isEqual.f785ded9.js";import"./_Uint8Array.4a2b558d.js";import"./_arrayPush.6d7e61e4.js";import"./pick.b27c0e8e.js";import"./flatten.a5c62c9e.js";import"./_baseFlatten.02332558.js";import"./_overRest.e23153e9.js";import"./index.245338dc.js";import"./browser.ea1aa81e.js";import"./index.2a500cf4.js";import"./i18n.de31208d.js";const de="left-check-change",ue="right-check-change",N=ae({data:{type:v(Array),default:()=>[]},titles:{type:v(Array),default:()=>[]},buttonTexts:{type:v(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:v(Function)},leftDefaultChecked:{type:v(Array),default:()=>[]},rightDefaultChecked:{type:v(Array),default:()=>[]},renderContent:{type:v(Function)},modelValue:{type:v(Array),default:()=>[]},format:{type:v(Object),default:()=>({})},filterable:Boolean,props:{type:v(Object),default:()=>ke({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),K=(t,a)=>[t,a].every(R)||R(t)&&Ee(a),Pe={[oe]:(t,a,m)=>[t,m].every(R)&&["left","right"].includes(a),[se]:t=>R(t),[de]:K,[ue]:K},j="checked-change",we=ae({data:N.data,optionRender:{type:v(Function)},placeholder:String,title:String,filterable:Boolean,format:N.format,filterMethod:N.filterMethod,defaultChecked:N.leftDefaultChecked,props:N.props}),Ne={[j]:K},F=t=>{const a={label:"label",key:"key",disabled:"disabled"};return p(()=>({...a,...t.props}))},Be=(t,a,m)=>{const n=F(t),d=p(()=>t.data.filter(r=>Ce(t.filterMethod)?t.filterMethod(a.query,r):String(r[n.value.label]||r[n.value.key]).toLowerCase().includes(a.query.toLowerCase()))),o=p(()=>d.value.filter(r=>!r[n.value.disabled])),f=p(()=>{const r=a.checked.length,c=t.data.length,{noChecked:h,hasChecked:b}=t.format;return h&&b?r>0?b.replace(/\${checked}/g,r.toString()).replace(/\${total}/g,c.toString()):h.replace(/\${total}/g,c.toString()):`${r}/${c}`}),l=p(()=>{const r=a.checked.length;return r>0&&r<o.value.length}),u=()=>{const r=o.value.map(c=>c[n.value.key]);a.allChecked=r.length>0&&r.every(c=>a.checked.includes(c))},i=r=>{a.checked=r?o.value.map(c=>c[n.value.key]):[]};return M(()=>a.checked,(r,c)=>{if(u(),a.checkChangeByUser){const h=r.concat(c).filter(b=>!r.includes(b)||!c.includes(b));m(j,r,h)}else m(j,r),a.checkChangeByUser=!0}),M(o,()=>{u()}),M(()=>t.data,()=>{const r=[],c=d.value.map(h=>h[n.value.key]);a.checked.forEach(h=>{c.includes(h)&&r.push(h)}),a.checkChangeByUser=!1,a.checked=r}),M(()=>t.defaultChecked,(r,c)=>{if(c&&r.length===c.length&&r.every(C=>c.includes(C)))return;const h=[],b=o.value.map(C=>C[n.value.key]);r.forEach(C=>{b.includes(C)&&h.push(C)}),a.checkChangeByUser=!1,a.checked=h},{immediate:!0}),{filteredData:d,checkableData:o,checkedSummary:f,isIndeterminate:l,updateAllChecked:u,handleAllCheckedChange:i}},Le=(t,a)=>({onSourceCheckedChange:(d,o)=>{t.leftChecked=d,o&&a(de,d,o)},onTargetCheckedChange:(d,o)=>{t.rightChecked=d,o&&a(ue,d,o)}}),Me=t=>{const a=F(t),m=p(()=>t.data.reduce((o,f)=>(o[f[a.value.key]]=f)&&o,{})),n=p(()=>t.data.filter(o=>!t.modelValue.includes(o[a.value.key]))),d=p(()=>t.targetOrder==="original"?t.data.filter(o=>t.modelValue.includes(o[a.value.key])):t.modelValue.reduce((o,f)=>{const l=m.value[f];return l&&o.push(l),o},[]));return{sourceData:n,targetData:d}},Ue=(t,a,m)=>{const n=F(t),d=(l,u,i)=>{m(se,l),m(oe,l,u,i)};return{addToLeft:()=>{const l=t.modelValue.slice();a.rightChecked.forEach(u=>{const i=l.indexOf(u);i>-1&&l.splice(i,1)}),d(l,"left",a.rightChecked)},addToRight:()=>{let l=t.modelValue.slice();const u=t.data.filter(i=>{const r=i[n.value.key];return a.leftChecked.includes(r)&&!t.modelValue.includes(r)}).map(i=>i[n.value.key]);l=t.targetOrder==="unshift"?u.concat(l):l.concat(u),t.targetOrder==="original"&&(l=t.data.filter(i=>l.includes(i[n.value.key])).map(i=>i[n.value.key])),d(l,"right",a.leftChecked)}}},$e=H({name:"ElTransferPanel"}),Fe=H({...$e,props:we,emits:Ne,setup(t,{expose:a,emit:m}){const n=t,d=re(),o=({option:k})=>k,{t:f}=ie(),l=le("transfer"),u=ne({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),i=F(n),{filteredData:r,checkedSummary:c,isIndeterminate:h,handleAllCheckedChange:b}=Be(n,u,m),C=p(()=>!P(u.query)&&P(r.value)),O=p(()=>!P(d.default()[0].children)),{checked:A,allChecked:D,query:w}=ge(u);return a({query:w}),(k,_)=>(V(),B("div",{class:y(e(l).b("panel"))},[U("p",{class:y(e(l).be("panel","header"))},[E(e(ee),{modelValue:e(D),"onUpdate:modelValue":_[0]||(_[0]=g=>I(D)?D.value=g:null),indeterminate:e(h),"validate-event":!1,onChange:e(b)},{default:T(()=>[ye($(k.title)+" ",1),U("span",null,$(e(c)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),U("div",{class:y([e(l).be("panel","body"),e(l).is("with-footer",e(O))])},[k.filterable?(V(),W(e(_e),{key:0,modelValue:e(w),"onUpdate:modelValue":_[1]||(_[1]=g=>I(w)?w.value=g:null),class:y(e(l).be("panel","filter")),size:"default",placeholder:k.placeholder,"prefix-icon":e(he),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):q("v-if",!0),J(E(e(Te),{modelValue:e(A),"onUpdate:modelValue":_[2]||(_[2]=g=>I(A)?A.value=g:null),"validate-event":!1,class:y([e(l).is("filterable",k.filterable),e(l).be("panel","list")])},{default:T(()=>[(V(!0),B(be,null,ve(e(r),g=>(V(),W(e(ee),{key:g[e(i).key],class:y(e(l).be("panel","item")),label:g[e(i).key],disabled:g[e(i).disabled],"validate-event":!1},{default:T(()=>{var L;return[E(o,{option:(L=k.optionRender)==null?void 0:L.call(k,g)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[X,!e(C)&&!e(P)(k.data)]]),J(U("p",{class:y(e(l).be("panel","empty"))},$(e(C)?e(f)("el.transfer.noMatch"):e(f)("el.transfer.noData")),3),[[X,e(C)||e(P)(k.data)]])],2),e(O)?(V(),B("p",{key:0,class:y(e(l).be("panel","footer"))},[G(k.$slots,"default")],2)):q("v-if",!0)],2))}});var te=ce(Fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const Oe={key:0},Re={key:0},qe=H({name:"ElTransfer"}),He=H({...qe,props:N,emits:Pe,setup(t,{expose:a,emit:m}){const n=t,d=re(),{t:o}=ie(),f=le("transfer"),{formItem:l}=Ve(),u=ne({leftChecked:[],rightChecked:[]}),i=F(n),{sourceData:r,targetData:c}=Me(n),{onSourceCheckedChange:h,onTargetCheckedChange:b}=Le(u,m),{addToLeft:C,addToRight:O}=Ue(n,u,m),A=Y(),D=Y(),w=s=>{switch(s){case"left":A.value.query="";break;case"right":D.value.query="";break}},k=p(()=>n.buttonTexts.length===2),_=p(()=>n.titles[0]||o("el.transfer.titles.0")),g=p(()=>n.titles[1]||o("el.transfer.titles.1")),L=p(()=>n.filterPlaceholder||o("el.transfer.filterPlaceholder"));M(()=>n.modelValue,()=>{var s;n.validateEvent&&((s=l==null?void 0:l.validate)==null||s.call(l,"change").catch(fe=>Ae()))});const z=p(()=>s=>n.renderContent?n.renderContent(Z,s):d.default?d.default({option:s}):Z("span",s[i.value.label]||s[i.value.key]));return a({clearQuery:w,leftPanel:A,rightPanel:D}),(s,fe)=>(V(),B("div",{class:y(e(f).b())},[E(te,{ref_key:"leftPanel",ref:A,data:e(r),"option-render":e(z),placeholder:e(L),title:e(_),filterable:s.filterable,format:s.format,"filter-method":s.filterMethod,"default-checked":s.leftDefaultChecked,props:n.props,onCheckedChange:e(h)},{default:T(()=>[G(s.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),U("div",{class:y(e(f).e("buttons"))},[E(e(S),{type:"primary",class:y([e(f).e("button"),e(f).is("with-texts",e(k))]),disabled:e(P)(u.rightChecked),onClick:e(C)},{default:T(()=>[E(e(Q),null,{default:T(()=>[E(e(me))]),_:1}),e(x)(s.buttonTexts[0])?q("v-if",!0):(V(),B("span",Oe,$(s.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),E(e(S),{type:"primary",class:y([e(f).e("button"),e(f).is("with-texts",e(k))]),disabled:e(P)(u.leftChecked),onClick:e(O)},{default:T(()=>[e(x)(s.buttonTexts[1])?q("v-if",!0):(V(),B("span",Re,$(s.buttonTexts[1]),1)),E(e(Q),null,{default:T(()=>[E(e(pe))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),E(te,{ref_key:"rightPanel",ref:D,data:e(c),"option-render":e(z),placeholder:e(L),filterable:s.filterable,format:s.format,"filter-method":s.filterMethod,title:e(g),"default-checked":s.rightDefaultChecked,props:n.props,onCheckedChange:e(b)},{default:T(()=>[G(s.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Ie=ce(He,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const Lt=De(Ie);export{Lt as ElTransfer,de as LEFT_CHECK_CHANGE_EVENT,ue as RIGHT_CHECK_CHANGE_EVENT,Lt as default,K as transferCheckedChangeFn,Pe as transferEmits,N as transferProps};
